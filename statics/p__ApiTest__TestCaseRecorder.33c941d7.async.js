"use strict";(self.webpackChunkpity=self.webpackChunkpity||[]).push([[8421],{22763:function(he,R,e){var K=e(32983),T=e(82759),U=e(85893);R.Z=function(D){var Z=D.desc,A=D.height,v=A===void 0?180:A,E=D.image,S=E===void 0?T.Z:E;return(0,U.jsx)(K.Z,{image:S,imageStyle:{height:v},description:Z||"\u6682\u65E0\u6570\u636E"})}},86607:function(he,R,e){var K=e(97857),T=e.n(K),U=e(5574),D=e.n(U),Z=e(13769),A=e.n(Z),v=e(67294),E=e(51904),S=e(85576),te=e(96365),re=e(42075),I=e(71577),J=e(83062),ne=e(64997),se=e(42481),oe=e(26671),_e=e(22763),N=e(40110),f=e(31484),H=e(37763),O=e.n(H),n=e(85893),ue=["dataSource","dispatch","loading"],Y=function(_){switch(_.toUpperCase()){case"GET":return{color:"rgb(235, 249, 244)",fontColor:"rgb(47, 177, 130)"};case"POST":return{color:"rgb(242, 244, 248)",fontColor:"rgb(5, 112, 175)"};case"PUT":return{color:"rgb(255, 247, 230)",fontColor:"rgb(255, 174, 0)"};case"DELETE":return{color:"rgb(253, 244, 246)",fontColor:"rgb(222, 72, 108)"};default:return{color:"rgb(243, 251, 254)",fontColor:"rgb(166, 187, 210)"}}},ae=function(_){var h=_.color,l=_.text,F=_.fontColor;return(0,n.jsx)(E.Z,{style:{color:F,borderRadius:12,padding:"0 12px"},color:h,children:l})},x=function(_){var h=_.name,l=_.record;return(0,n.jsx)("a",{onClick:function(){S.Z.info({title:h,width:700,bodyStyle:{padding:-12},content:(0,n.jsx)(se.Z,{language:"json",style:oe.BV,children:l[h]})})},children:"\u8BE6\u7EC6"})},Q=function(_){var h=_.dataSource,l=_.dispatch,F=_.loading,$=A()(_,ue),X=(0,v.useState)(""),w=D()(X,2),t=w[0],z=w[1],le=(0,v.useState)(""),j=D()(le,2),g=j[0],d=j[1],W=(0,v.useRef)(null),M=function(r,o,s){o(),z(r[0]),d(s)},G=function(r){r(),z("")},ie=function(r){return{filterDropdown:function(s){var m=s.setSelectedKeys,P=s.selectedKeys,b=s.confirm,q=s.clearFilters;return(0,n.jsxs)("div",{style:{padding:8},children:[(0,n.jsx)(te.Z,{ref:W,placeholder:"\u641C\u7D22 ".concat(r),value:P[0],onChange:function(L){return m(L.target.value?[L.target.value]:[])},onPressEnter:function(){return M(P,b,r)},style:{marginBottom:8,display:"block"}}),(0,n.jsxs)(re.Z,{children:[(0,n.jsx)(I.ZP,{type:"primary",onClick:function(){return M(P,b,r)},icon:(0,n.jsx)(N.Z,{}),size:"small",style:{width:90},children:"\u67E5\u627E"}),(0,n.jsx)(I.ZP,{onClick:function(){return q&&G(q)},size:"small",style:{width:90},children:"\u91CD\u7F6E"}),(0,n.jsx)(I.ZP,{type:"link",size:"small",onClick:function(){b({closeDropdown:!1}),z(P[0]),d(r)},children:"\u8FC7\u6EE4"})]})]})},filterIcon:function(s){return(0,n.jsx)(N.Z,{style:{color:s?"#1890ff":void 0}})},onFilter:function(s,m){return m[r].toString().toLowerCase().includes(s.toLowerCase())},onFilterDropdownVisibleChange:function(s){s&&setTimeout(function(){var m;return(m=W.current)===null||m===void 0?void 0:m.select()},100)},ellipsis:!0,render:function(s){return g===r?(0,n.jsx)(J.Z,{title:s,children:(0,n.jsx)(O(),{highlightStyle:{backgroundColor:"#ffc069",padding:0},searchWords:[t],autoEscape:!0,textToHighlight:s?s.toString():""})}):(0,n.jsx)(J.Z,{title:s,children:(0,n.jsx)("a",{href:s,children:s.slice(0,48)})})}}},k=function(r){l({type:"recorder/remove",payload:r})},i=[{title:"\u7F16\u53F7",key:"index",render:function(r,o){return"".concat(o.index+1)}},T()({title:"\u8BF7\u6C42\u5730\u5740",key:"url",dataIndex:"url",width:"20%"},ie("url")),{title:"\u8BF7\u6C42\u65B9\u5F0F",key:"request_method",dataIndex:"request_method",render:function(r){return(0,n.jsx)(ae,{fontColor:Y(r).fontColor,color:Y(r).color,text:r})}},{title:"\u8BF7\u6C42headers",key:"request_headers",dataIndex:"request_headers",render:function(r,o){return(0,n.jsx)(x,{name:"request_headers",record:o})}},{title:"\u8BF7\u6C42\u53C2\u6570",key:"body",dataIndex:"body",render:function(r,o){return r?(0,n.jsx)(x,{name:"body",record:o}):"-"}},{title:"\u8FD4\u56DEheaders",key:"response_headers",dataIndex:"response_headers",render:function(r,o){return r?(0,n.jsx)(x,{name:"response_headers",record:o}):"-"}},{title:"response",key:"response_content",dataIndex:"response_content",render:function(r,o){return r?(0,n.jsx)(x,{name:"response_content",record:o}):"-"}},{key:"ops",title:"\u64CD\u4F5C",render:function(r,o){return(0,n.jsx)(J.Z,{title:"\u70B9\u51FB\u53EF\u5220\u9664\u5F55\u5236\u6570\u636E(\u4E0D\u63A8\u8350)",children:(0,n.jsx)(f.Z,{twoToneColor:"#F56C6C",onClick:function(){k(o.index)}})})}}];return(0,n.jsx)(ne.Z,{columns:i,dataSource:h,rowSelection:$.rowSelection,rowKey:function(r){return r[$.rowKey]},loading:F,locale:{emptyText:(0,n.jsx)(_e.Z,{desc:$.emptyText,height:150})}})};R.Z=Q},19402:function(he,R,e){e.r(R);var K=e(97857),T=e.n(K),U=e(15009),D=e.n(U),Z=e(99289),A=e.n(Z),v=e(5574),E=e.n(v),S=e(11609),te=e(67),re=e(43215),I=e(35603),J=e(61462),ne=e(34804),se=e(2830),oe=e(87784),_e=e(97680),N=e(34041),f=e(52445),H=e(26855),O=e(75308),n=e(38925),ue=e(4393),Y=e(85576),ae=e(59847),x=e(96365),Q=e(71230),p=e(15746),_=e(85418),h=e(71577),l=e(67294),F=e(90596),$=e(86607),X=e(19478),w=e(74952),t=e(85893),z=N.Z.Option,le=function(g){var d=g.dispatch,W=g.project,M=g.recorder,G=g.testcase,ie=g.loading,k=M.recordStatus,i=M.recordLists,u=M.regex,r=W.projects,o=G.directory,s=(0,l.useState)([]),m=E()(s,2),P=m[0],b=m[1],q=(0,l.useState)(u),B=E()(q,2),L=B[0],me=B[1],Ce=(0,l.useState)(!1),De=E()(Ce,2),Oe=De[0],de=De[1],pe=(0,l.useState)(null),je=E()(pe,2),ce=je[0],ge=je[1],Me=f.Z.useForm(),ve=E()(Me,1),Pe=ve[0],fe={selectedRowKeys:P,onChange:function(c){b(c)}},xe=function(){ce&&d({type:"testcase/listTestcaseDirectory",payload:{project_id:ce,move:!0}})};(0,l.useEffect)(function(){d({type:"recorder/queryRecordStatus"})},[]),(0,l.useEffect)(function(){me(u)},[u]),(0,l.useEffect)(function(){d({type:"project/listProject"})},[]),(0,l.useEffect)(function(){ge(null),xe()},[ce]);var Be=function(){if(!L){H.Z.error({message:"\u5EFA\u8BAE\u586B\u5199\u8FC7\u6EE4url\uFF0C\u5426\u5219\u6570\u636E\u4F1A\u8F83\u591A"});return}d({type:"recorder/startRecord",payload:{regex:L}})},ye=function(){d({type:"recorder/stopRecord"})},Re=function(){var a=A()(D()().mark(function c(){var Ee,ee;return D()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return y.next=2,Pe.validateFields();case 2:return Ee=y.sent,y.next=5,d({type:"recorder/generateCase",payload:{directory_id:Ee.directory_id,name:Ee.name,requests:P.map(function(C){return{request_headers:JSON.parse(i[C].request_headers),response_headers:JSON.parse(i[C].response_headers),cookies:JSON.parse(i[C].cookies),request_cookies:JSON.parse(i[C].request_cookies),response_content:i[C].response_content,request_method:i[C].request_method,url:i[C].url,body:i[C].body,status_code:i[C].status_code}})}});case 5:ee=y.sent,ee&&(de(!1),b([]),H.Z.success({message:"\u7528\u4F8B\u751F\u6210\u6210\u529F",description:(0,t.jsxs)("span",{children:["\u70B9\u51FB",(0,t.jsx)("a",{href:"/#/apiTest/testcase/".concat(ee.data.directory_id,"/").concat(ee.data.id),children:"\u94FE\u63A5"}),"\u53EF\u8DF3\u8F6C\u81F3\u6D4B\u8BD5\u7528\u4F8B"]})}));case 7:case"end":return y.stop()}},c)}));return function(){return a.apply(this,arguments)}}(),V=function(c){return"".concat(X.Z.URL,"/request/cert?cert=").concat(c)},Te=(0,t.jsxs)(O.Z,{children:[(0,t.jsxs)(O.Z.Item,{children:[(0,t.jsx)(te.Z,{}),(0,t.jsx)("a",{href:V(0),children:" Windows"})]},"windows"),(0,t.jsxs)(O.Z.Item,{children:[(0,t.jsx)(re.Z,{}),(0,t.jsx)("a",{href:V(1),children:" Linux"})]},"linux"),(0,t.jsxs)(O.Z.Item,{children:[(0,t.jsx)(I.Z,{}),(0,t.jsx)("a",{href:V(2),children:" Mac OS"})]},"macos"),(0,t.jsxs)(O.Z.Item,{children:[(0,t.jsx)(I.Z,{}),(0,t.jsx)("a",{href:V(3),children:" IOS"})]},"ios"),(0,t.jsxs)(O.Z.Item,{children:[(0,t.jsx)(J.Z,{}),(0,t.jsx)("a",{href:V(4),children:" Android"})]},"android")]});return(0,t.jsxs)(S._z,{breadcrumb:null,title:(0,t.jsxs)("span",{className:"ant-page-header-heading-title",children:["\u7528\u4F8B\u5F55\u5236 ",(0,t.jsx)(w.Z,{theme:"outline",size:"18",fill:"#7ed321",strokeLinecap:"square"})," "]}),children:[(0,t.jsx)(n.Z,{message:"\u7531\u4E8E\u5F55\u5236\u4EE3\u7406CPU\u8D1F\u8377\u8FC7\u9AD8\uFF0C\u6682\u65F6\u5148\u5173\u95ED\u6B64\u529F\u80FD\uFF5E\u{1F351}",style:{marginBottom:16},type:"warning",banner:!0,closable:!0}),(0,t.jsxs)(ue.Z,{children:[(0,t.jsx)(Y.Z,{title:(0,t.jsxs)("span",{children:["\u751F\u6210\u7528\u4F8B - \u5DF2\u9009\u4E2D",P.length,"\u6761\u6570\u636E"]}),open:Oe,onOk:Re,onCancel:function(){return de(!1)},children:(0,t.jsxs)(f.Z,T()(T()({form:Pe},X.Z.LAYOUT),{},{children:[(0,t.jsx)(f.Z.Item,{label:"\u9879\u76EE",children:(0,t.jsx)(N.Z,{placeholder:"\u8BF7\u9009\u62E9\u9879\u76EE",onChange:function(c){ge(c)},children:r.map(function(a){return(0,t.jsx)(z,{value:a.id,children:a.name},a.id)})})}),(0,t.jsx)(f.Z.Item,{label:"\u573A\u666F\u76EE\u5F55",name:"directory_id",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u573A\u666F\u76EE\u5F55"}],children:(0,t.jsx)(ae.Z,{placeholder:"\u5148\u9009\u62E9\u9879\u76EE\uFF0C\u7136\u540E\u9009\u62E9\u4F60\u8981\u751F\u6210\u7684\u573A\u666F\u76EE\u5F55",treeLine:!0,treeData:o})}),(0,t.jsx)(f.Z.Item,{label:"\u573A\u666F\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7528\u4F8B\u540D\u79F0"}],children:(0,t.jsx)(x.Z,{placeholder:"\u8BF7\u8F93\u5165\u573A\u666F\u540D\u79F0"})})]}))}),(0,t.jsxs)(Q.Z,{gutter:12,children:[(0,t.jsx)(p.Z,{span:10,children:(0,t.jsx)(n.Z,{type:"info",banner:!0,closable:!0,message:(0,t.jsxs)("span",{children:["\u{1F4E2} \u5F55\u5236\u63A5\u53E3\u4E4B\u524D\uFF0C\u8BF7\u5148\u914D\u7F6E\u597Dapp/web\u4EE3\u7406\u54E6~",(0,t.jsx)("a",{href:"https://wuranxu.github.io/pityDoc/%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/%E6%8E%A5%E5%8F%A3%E7%94%A8%E4%BE%8B/%E7%94%A8%E4%BE%8B%E5%BD%95%E5%88%B6",target:"_blank",rel:"noreferrer",children:" \u53C2\u8003\u6587\u6863"})]})})}),(0,t.jsxs)(p.Z,{span:8,children:[(0,t.jsx)(_.Z,{overlay:Te,children:(0,t.jsxs)("a",{onClick:function(c){return c.preventDefault()},children:["\u4E0B\u8F7D\u8BC1\u4E66 ",(0,t.jsx)(ne.Z,{})]})}),(0,t.jsx)(x.Z,{placeholder:"\u8BF7\u8F93\u5165\u8981\u5339\u914D\u7684url(\u6B63\u5219\u8868\u8FBE\u5F0F)",value:L,onChange:function(c){me(c.target.value)},style:{width:"75%",marginLeft:12}})]}),(0,t.jsxs)(p.Z,{span:6,children:[(0,t.jsxs)(h.ZP,{style:{float:"right",marginRight:8},onClick:function(){return de(!0)},disabled:P.length===0,children:[(0,t.jsx)(se.Z,{}),"\u751F\u6210\u7528\u4F8B"]}),k?(0,t.jsxs)(h.ZP,{onClick:ye,danger:!0,style:{float:"right",marginRight:8},children:[(0,t.jsx)(oe.Z,{}),"\u505C\u6B62\u5F55\u5236"]}):(0,t.jsxs)(h.ZP,{type:"primary",style:{float:"right",marginRight:8},onClick:Be,loading:k,children:[(0,t.jsx)(_e.Z,{}),i.length===0?"\u5F00\u59CB\u5F55\u5236":"\u91CD\u65B0\u5F55\u5236"]})]})]}),(0,t.jsx)(Q.Z,{gutter:8,style:{marginTop:12},children:(0,t.jsx)(p.Z,{span:24,children:(0,t.jsx)($.Z,{rowSelection:fe,rowKey:"index",emptyText:"\u70B9\u51FB\u5F55\u5236\u6309\u94AE\u5373\u53EF\u5F00\u59CB\u5F55\u5236app/web\u7684\u63A5\u53E3\u8BF7\u6C42",dataSource:i,dispatch:d,loading:ie.effects["recorder/queryRecordStatus"]})})})]})]})};R.default=(0,F.connect)(function(j){var g=j.loading,d=j.recorder,W=j.project,M=j.testcase,G=j.global;return{global:G,recorder:d,testcase:M,project:W,loading:g}})(le)}}]);
