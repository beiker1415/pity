"use strict";(self.webpackChunkpity=self.webpackChunkpity||[]).push([[4401],{51042:function(k,I,e){var O=e(1413),E=e(67294),C=e(42110),g=e(84089),B=function(a,A){return E.createElement(g.Z,(0,O.Z)((0,O.Z)({},a),{},{ref:A,icon:C.Z}))};B.displayName="PlusOutlined",I.Z=E.forwardRef(B)},646:function(k,I,e){var O=e(86738),E=e(85893);I.Z=function(C){var g=C.title,B=C.text,F=C.onConfirm;return(0,E.jsx)(O.Z,{title:g,onConfirm:F,children:(0,E.jsx)("a",{children:B})})}},77619:function(k,I,e){e.r(I);var O=e(97857),E=e.n(O),C=e(15009),g=e.n(C),B=e(99289),F=e.n(B),a=e(5574),A=e.n(a),U=e(11609),W=e(34041),J=e(51904),H=e(96074),m=e(52445),q=e(4393),ee=e(71230),K=e(15746),R=e(96365),ne=e(71577),te=e(85576),X=e(73360),le=e(64997),Y=e(90596),S=e(67294),G=e(19478),re=e(51042),w=e(646),n=e(85893),t=W.Z.Option,r=function(l){var s=l.gconfig,x=l.loading,f=l.dispatch,c=s.envList,P=s.redisConfig,h=s.envMap,j=(0,S.useState)(!1),T=A()(j,2),$=T[0],D=T[1],N=(0,S.useState)({}),y=A()(N,2),v=y[0],L=y[1],M=function(){var p=u.getFieldsValue();f({type:"gconfig/fetchRedisConfig",payload:p})},se=function(){f({type:"gconfig/fetchEnvList",payload:{page:1,size:1e3,exactly:!0}})},ae=function(){var i=F()(g()().mark(function p(Z){var b;return g()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,f({type:"gconfig/deleteRedisConfig",payload:{id:Z}});case 2:b=o.sent,b&&M();case 4:case"end":return o.stop()}},p)}));return function(Z){return i.apply(this,arguments)}}();(0,S.useEffect)(function(){M(),se()},[]),(0,S.useEffect)(function(){Q.resetFields(),Q.setFieldsValue(v)},[v]);var V=[{title:"\u73AF\u5883",key:"env",dataIndex:"env",render:function(p){return h[p]}},{title:"\u540D\u79F0",key:"name",dataIndex:"name"},{title:"\u5730\u5740",key:"addr",dataIndex:"addr"},{title:"\u7528\u6237\u540D",key:"username",dataIndex:"username"},{title:"\u5BC6\u7801",key:"password",dataIndex:"password"},{title:"\u7C7B\u578B",key:"cluster",dataIndex:"cluster",render:function(p){return p?(0,n.jsx)(J.Z,{color:"blue",children:"\u96C6\u7FA4"}):(0,n.jsx)(J.Z,{color:"green",children:"\u5B9E\u4F8B"})}},{title:"\u64CD\u4F5C",key:"ops",render:function(p,Z){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{onClick:function(){L(Z),D(!0)},children:"\u7F16\u8F91"}),(0,n.jsx)(H.Z,{type:"vertical"}),(0,n.jsx)(w.Z,{text:"\u5220\u9664",title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8BE5redis\u914D\u7F6E\u5417?",onConfirm:F()(g()().mark(function b(){return g()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,ae(Z.id);case 2:case"end":return o.stop()}},b)}))})]})}}],oe=m.Z.useForm(),ue=A()(oe,1),u=ue[0],_=m.Z.useForm(),z=A()(_,1),Q=z[0],de=function(){var i=F()(g()().mark(function p(){var Z,b;return g()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Q.validateFields();case 2:if(Z=o.sent,v.id){o.next=9;break}return o.next=6,f({type:"gconfig/insertRedisConfig",payload:Z});case 6:b=o.sent,o.next=12;break;case 9:return o.next=11,f({type:"gconfig/updateRedisConfig",payload:E()(E()({},Z),{},{id:v.id})});case 11:b=o.sent;case 12:b&&(D(!1),M());case 13:case"end":return o.stop()}},p)}));return function(){return i.apply(this,arguments)}}();return(0,n.jsx)(U._z,{title:"Redis\u914D\u7F6E",breadcrumb:null,children:(0,n.jsxs)(q.Z,{children:[(0,n.jsx)(m.Z,E()(E()({form:u},G.Z.LAYOUT),{},{onValuesChange:function(){M()},children:(0,n.jsxs)(ee.Z,{gutter:[8,8],children:[(0,n.jsx)(K.Z,{span:6,children:(0,n.jsx)(m.Z.Item,{label:"\u73AF\u5883",name:"env",children:(0,n.jsx)(W.Z,{placeholder:"\u9009\u62E9\u73AF\u5883",allowClear:!0,children:c.map(function(i){return(0,n.jsx)(t,{value:i.id,children:i.name},i.id)})})})}),(0,n.jsx)(K.Z,{span:6,children:(0,n.jsx)(m.Z.Item,{label:"\u540D\u79F0",name:"name",children:(0,n.jsx)(R.Z,{placeholder:"\u8F93\u5165redis\u540D\u79F0"})})}),(0,n.jsx)(K.Z,{span:6,children:(0,n.jsx)(m.Z.Item,{label:"\u5730\u5740",name:"addr",children:(0,n.jsx)(R.Z,{placeholder:"\u8F93\u5165redis\u5730\u5740"})})}),(0,n.jsx)(K.Z,{span:6,children:(0,n.jsx)(m.Z.Item,{label:"\u7C7B\u578B",name:"cluster",children:(0,n.jsxs)(W.Z,{placeholder:"\u9009\u62E9redis\u7C7B\u578B",allowClear:!0,children:[(0,n.jsx)(t,{value:!0,children:"\u96C6\u7FA4"}),(0,n.jsx)(t,{value:!1,children:"\u5B9E\u4F8B"})]})})})]})})),(0,n.jsxs)(ne.ZP,{type:"primary",style:{marginBottom:8},onClick:function(){D(!0),L({})},children:[(0,n.jsx)(re.Z,{}),"\u6DFB\u52A0\u914D\u7F6E"]}),(0,n.jsx)(te.Z,{title:"Redis\u914D\u7F6E",width:500,open:$,onCancel:function(){return D(!1)},onOk:de,children:(0,n.jsxs)(m.Z,E()(E()({form:Q,initialValues:v},G.Z.LAYOUT),{},{children:[(0,n.jsx)(m.Z.Item,{label:"\u73AF\u5883",name:"env",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BF9\u5E94\u73AF\u5883"}],children:(0,n.jsx)(W.Z,{placeholder:"\u9009\u62E9\u73AF\u5883",allowClear:!0,children:c.map(function(i){return(0,n.jsx)(t,{value:i.id,children:i.name},i.id)})})}),(0,n.jsx)(m.Z.Item,{label:"redis\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BF9\u5E94redis\u540D\u79F0"}],children:(0,n.jsx)(R.Z,{placeholder:"\u8F93\u5165redis\u540D\u79F0"})}),(0,n.jsx)(m.Z.Item,{label:"\u5730\u5740",name:"addr",rules:[{required:!0,message:"\u8F93\u5165redis\u8FDE\u63A5\u5730\u5740\uFF0C\u96C6\u7FA4\u7528\u82F1\u6587\u9017\u53F7\u9694\u5F00"}],children:(0,n.jsx)(R.Z,{placeholder:"\u8F93\u5165redis\u8FDE\u63A5\u5730\u5740, \u96C6\u7FA4\u7528\u82F1\u6587\u9017\u53F7\u9694\u5F00"})}),(0,n.jsx)(m.Z.Item,{label:"\u7528\u6237\u540D",name:"username",rules:[{required:!1,message:"\u8F93\u5165redis\u7528\u6237\u540D"}],children:(0,n.jsx)(R.Z,{placeholder:"\u8F93\u5165redis\u7528\u6237\u540D"})}),(0,n.jsx)(m.Z.Item,{label:"\u5BC6\u7801",name:"password",rules:[{required:!1,message:"\u8F93\u5165redis\u5BC6\u7801"}],children:(0,n.jsx)(R.Z,{placeholder:"\u8F93\u5165redis\u5BC6\u7801"})}),(0,n.jsx)(m.Z.Item,{label:"db",name:"db",rules:[{required:!1,message:"\u8F93\u5165redis\u5BC6\u7801"}],children:(0,n.jsx)(X.Z,{placeholder:"\u8F93\u5165db\uFF0C\u9ED8\u8BA4\u4E3A0(\u96C6\u7FA4\u4E0D\u9700\u8981db)",style:{width:"100%"}})}),(0,n.jsx)(m.Z.Item,{label:"\u7C7B\u578B",name:"cluster",rules:[{required:!0,message:"\u9009\u62E9redis\u7C7B\u578B"}],children:(0,n.jsxs)(W.Z,{placeholder:"\u9009\u62E9redis\u7C7B\u578B",children:[(0,n.jsx)(t,{value:!0,children:"\u96C6\u7FA4"}),(0,n.jsx)(t,{value:!1,children:"\u5B9E\u4F8B"})]})})]}))}),(0,n.jsx)(le.Z,{columns:V,dataSource:P,rowKey:function(p){return p.id},loading:x.effects["gconfig/listRedisConfig"]})]})})};I.default=(0,Y.connect)(function(d){var l=d.gconfig,s=d.loading;return{gconfig:l,loading:s}})(r)},86738:function(k,I,e){e.d(I,{Z:function(){return n}});var O=e(26702),E=e(94184),C=e.n(E),g=e(15105),B=e(21770),F=e(98423),a=e(67294),A=e(96159),U=e(53124),W=e(55241),J=e(86743),H=e(81643),m=e(71577),q=e(85432),ee=e(10110),K=e(40378),R=e(60590),ne=e(67968);const te=t=>{const{componentCls:r,iconCls:d,antCls:l,zIndexPopup:s,colorText:x,colorWarning:f,marginXXS:c,marginXS:P,fontSize:h,fontWeightStrong:j,colorTextHeading:T}=t;return{[r]:{zIndex:s,[`&${l}-popover`]:{fontSize:h},[`${r}-message`]:{marginBottom:P,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${r}-message-icon ${d}`]:{color:f,fontSize:h,lineHeight:1,marginInlineEnd:P},[`${r}-title`]:{fontWeight:j,color:T,"&:only-child":{fontWeight:"normal"}},[`${r}-description`]:{marginTop:c,color:x}},[`${r}-buttons`]:{textAlign:"end",whiteSpace:"nowrap",button:{marginInlineStart:P}}}}};var X=(0,ne.Z)("Popconfirm",t=>te(t),t=>{const{zIndexPopupBase:r}=t;return{zIndexPopup:r+60}}),le=function(t,r){var d={};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&r.indexOf(l)<0&&(d[l]=t[l]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,l=Object.getOwnPropertySymbols(t);s<l.length;s++)r.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(t,l[s])&&(d[l[s]]=t[l[s]]);return d};const Y=t=>{const{prefixCls:r,okButtonProps:d,cancelButtonProps:l,title:s,description:x,cancelText:f,okText:c,okType:P="primary",icon:h=a.createElement(O.Z,null),showCancel:j=!0,close:T,onConfirm:$,onCancel:D,onPopupClick:N}=t,{getPrefixCls:y}=a.useContext(U.E_),[v]=(0,ee.Z)("Popconfirm",K.Z.Popconfirm),L=(0,H.Z)(s),M=(0,H.Z)(x);return a.createElement("div",{className:`${r}-inner-content`,onClick:N},a.createElement("div",{className:`${r}-message`},h&&a.createElement("span",{className:`${r}-message-icon`},h),a.createElement("div",{className:`${r}-message-text`},L&&a.createElement("div",{className:C()(`${r}-title`)},L),M&&a.createElement("div",{className:`${r}-description`},M))),a.createElement("div",{className:`${r}-buttons`},j&&a.createElement(m.ZP,Object.assign({onClick:D,size:"small"},l),f!=null?f:v==null?void 0:v.cancelText),a.createElement(J.Z,{buttonProps:Object.assign(Object.assign({size:"small"},(0,q.n)(P)),d),actionFn:$,close:T,prefixCls:y("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},c!=null?c:v==null?void 0:v.okText)))};var G=t=>{const{prefixCls:r,placement:d,className:l,style:s}=t,x=le(t,["prefixCls","placement","className","style"]),{getPrefixCls:f}=a.useContext(U.E_),c=f("popconfirm",r),[P]=X(c);return P(a.createElement(R.ZP,{placement:d,className:C()(c,l),style:s,content:a.createElement(Y,Object.assign({prefixCls:c},x))}))},re=function(t,r){var d={};for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&r.indexOf(l)<0&&(d[l]=t[l]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,l=Object.getOwnPropertySymbols(t);s<l.length;s++)r.indexOf(l[s])<0&&Object.prototype.propertyIsEnumerable.call(t,l[s])&&(d[l[s]]=t[l[s]]);return d};const w=a.forwardRef((t,r)=>{const{prefixCls:d,placement:l="top",trigger:s="click",okType:x="primary",icon:f=a.createElement(O.Z,null),children:c,overlayClassName:P,onOpenChange:h,onVisibleChange:j}=t,T=re(t,["prefixCls","placement","trigger","okType","icon","children","overlayClassName","onOpenChange","onVisibleChange"]),{getPrefixCls:$}=a.useContext(U.E_),[D,N]=(0,B.Z)(!1,{value:t.open,defaultValue:t.defaultOpen}),y=(u,_)=>{N(u,!0),j==null||j(u),h==null||h(u,_)},v=u=>{y(!1,u)},L=u=>{var _;return(_=t.onConfirm)===null||_===void 0?void 0:_.call(void 0,u)},M=u=>{var _;y(!1,u),(_=t.onCancel)===null||_===void 0||_.call(void 0,u)},se=u=>{u.keyCode===g.Z.ESC&&D&&y(!1,u)},ae=u=>{const{disabled:_=!1}=t;_||y(u)},V=$("popconfirm",d),oe=C()(V,P),[ue]=X(V);return ue(a.createElement(W.Z,Object.assign({},(0,F.Z)(T,["title"]),{trigger:s,placement:l,onOpenChange:ae,open:D,ref:r,overlayClassName:oe,content:a.createElement(Y,Object.assign({okType:x,icon:f},t,{prefixCls:V,close:v,onConfirm:L,onCancel:M})),"data-popover-inject":!0}),(0,A.Tm)(c,{onKeyDown:u=>{var _,z;a.isValidElement(c)&&((z=c==null?void 0:(_=c.props).onKeyDown)===null||z===void 0||z.call(_,u)),se(u)}})))});w._InternalPanelDoNotUseOrYouWillBeFired=G;var n=w}}]);
