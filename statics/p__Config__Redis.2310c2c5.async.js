"use strict";(self.webpackChunkpity=self.webpackChunkpity||[]).push([[4401],{646:function(ae,L,t){var K=t(86738),O=t(85893);L.Z=function(_){var m=_.title,U=_.text,i=_.onConfirm;return(0,O.jsx)(K.Z,{title:m,onConfirm:i,children:(0,O.jsx)("a",{children:U})})}},77619:function(ae,L,t){t.r(L);var K=t(97857),O=t.n(K),_=t(15009),m=t.n(_),U=t(99289),i=t.n(U),G=t(5574),D=t.n(G),J=t(58841),T=t(34041),V=t(51904),Q=t(96074),g=t(58131),k=t(4393),q=t(71230),I=t(15746),M=t(96365),oe=t(71577),ee=t(69400),X=t(43589),ne=t(64240),z=t(94171),N=t(67294),n=t(19478),f=t(51042),u=t(646),e=t(85893),r=T.Z.Option,a=function(l){var c=l.gconfig,d=l.loading,s=l.dispatch,h=c.envList,P=c.redisConfig,Z=c.envMap,H=(0,N.useState)(!1),F=D()(H,2),R=F[0],B=F[1],x=(0,N.useState)({}),S=D()(x,2),A=S[0],Y=S[1],b=function(){var y=w.getFieldsValue();s({type:"gconfig/fetchRedisConfig",payload:y})},te=function(){s({type:"gconfig/fetchEnvList",payload:{page:1,size:1e3,exactly:!0}})},re=function(){var C=i()(m()().mark(function y($){var W;return m()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,s({type:"gconfig/deleteRedisConfig",payload:{id:$}});case 2:W=v.sent,W&&b();case 4:case"end":return v.stop()}},y)}));return function($){return C.apply(this,arguments)}}();(0,N.useEffect)(function(){b(),te()},[]),(0,N.useEffect)(function(){le.resetFields(),le.setFieldsValue(A)},[A]);var p=[{title:"\u73AF\u5883",key:"env",dataIndex:"env",render:function(y){return Z[y]}},{title:"\u540D\u79F0",key:"name",dataIndex:"name"},{title:"\u5730\u5740",key:"addr",dataIndex:"addr"},{title:"\u7528\u6237\u540D",key:"username",dataIndex:"username"},{title:"\u5BC6\u7801",key:"password",dataIndex:"password"},{title:"\u7C7B\u578B",key:"cluster",dataIndex:"cluster",render:function(y){return y?(0,e.jsx)(V.Z,{color:"blue",children:"\u96C6\u7FA4"}):(0,e.jsx)(V.Z,{color:"green",children:"\u5B9E\u4F8B"})}},{title:"\u64CD\u4F5C",key:"ops",render:function(y,$){return(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("a",{onClick:function(){Y($),B(!0)},children:"\u7F16\u8F91"}),(0,e.jsx)(Q.Z,{type:"vertical"}),(0,e.jsx)(u.Z,{text:"\u5220\u9664",title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8BE5redis\u914D\u7F6E\u5417?",onConfirm:i()(m()().mark(function W(){return m()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,re($.id);case 2:case"end":return v.stop()}},W)}))})]})}}],E=g.Z.useForm(),j=D()(E,1),w=j[0],ie=g.Z.useForm(),ce=D()(ie,1),le=ce[0],ue=function(){var C=i()(m()().mark(function y(){var $,W;return m()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,le.validateFields();case 2:if($=v.sent,A.id){v.next=9;break}return v.next=6,s({type:"gconfig/insertRedisConfig",payload:$});case 6:W=v.sent,v.next=12;break;case 9:return v.next=11,s({type:"gconfig/updateRedisConfig",payload:O()(O()({},$),{},{id:A.id})});case 11:W=v.sent;case 12:W&&(B(!1),b());case 13:case"end":return v.stop()}},y)}));return function(){return C.apply(this,arguments)}}();return(0,e.jsx)(J._z,{title:"Redis\u914D\u7F6E",breadcrumb:null,children:(0,e.jsxs)(k.Z,{children:[(0,e.jsx)(g.Z,O()(O()({form:w},n.Z.LAYOUT),{},{onValuesChange:function(){b()},children:(0,e.jsxs)(q.Z,{gutter:[8,8],children:[(0,e.jsx)(I.Z,{span:6,children:(0,e.jsx)(g.Z.Item,{label:"\u73AF\u5883",name:"env",children:(0,e.jsx)(T.Z,{placeholder:"\u9009\u62E9\u73AF\u5883",allowClear:!0,children:h.map(function(C){return(0,e.jsx)(r,{value:C.id,children:C.name},C.id)})})})}),(0,e.jsx)(I.Z,{span:6,children:(0,e.jsx)(g.Z.Item,{label:"\u540D\u79F0",name:"name",children:(0,e.jsx)(M.Z,{placeholder:"\u8F93\u5165redis\u540D\u79F0"})})}),(0,e.jsx)(I.Z,{span:6,children:(0,e.jsx)(g.Z.Item,{label:"\u5730\u5740",name:"addr",children:(0,e.jsx)(M.Z,{placeholder:"\u8F93\u5165redis\u5730\u5740"})})}),(0,e.jsx)(I.Z,{span:6,children:(0,e.jsx)(g.Z.Item,{label:"\u7C7B\u578B",name:"cluster",children:(0,e.jsxs)(T.Z,{placeholder:"\u9009\u62E9redis\u7C7B\u578B",allowClear:!0,children:[(0,e.jsx)(r,{value:!0,children:"\u96C6\u7FA4"}),(0,e.jsx)(r,{value:!1,children:"\u5B9E\u4F8B"})]})})})]})})),(0,e.jsxs)(oe.ZP,{type:"primary",style:{marginBottom:8},onClick:function(){B(!0),Y({})},children:[(0,e.jsx)(f.Z,{}),"\u6DFB\u52A0\u914D\u7F6E"]}),(0,e.jsx)(ee.Z,{title:"Redis\u914D\u7F6E",width:500,open:R,onCancel:function(){return B(!1)},onOk:ue,children:(0,e.jsxs)(g.Z,O()(O()({form:le,initialValues:A},n.Z.LAYOUT),{},{children:[(0,e.jsx)(g.Z.Item,{label:"\u73AF\u5883",name:"env",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5BF9\u5E94\u73AF\u5883"}],children:(0,e.jsx)(T.Z,{placeholder:"\u9009\u62E9\u73AF\u5883",allowClear:!0,children:h.map(function(C){return(0,e.jsx)(r,{value:C.id,children:C.name},C.id)})})}),(0,e.jsx)(g.Z.Item,{label:"redis\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BF9\u5E94redis\u540D\u79F0"}],children:(0,e.jsx)(M.Z,{placeholder:"\u8F93\u5165redis\u540D\u79F0"})}),(0,e.jsx)(g.Z.Item,{label:"\u5730\u5740",name:"addr",rules:[{required:!0,message:"\u8F93\u5165redis\u8FDE\u63A5\u5730\u5740\uFF0C\u96C6\u7FA4\u7528\u82F1\u6587\u9017\u53F7\u9694\u5F00"}],children:(0,e.jsx)(M.Z,{placeholder:"\u8F93\u5165redis\u8FDE\u63A5\u5730\u5740, \u96C6\u7FA4\u7528\u82F1\u6587\u9017\u53F7\u9694\u5F00"})}),(0,e.jsx)(g.Z.Item,{label:"\u7528\u6237\u540D",name:"username",rules:[{required:!1,message:"\u8F93\u5165redis\u7528\u6237\u540D"}],children:(0,e.jsx)(M.Z,{placeholder:"\u8F93\u5165redis\u7528\u6237\u540D"})}),(0,e.jsx)(g.Z.Item,{label:"\u5BC6\u7801",name:"password",rules:[{required:!1,message:"\u8F93\u5165redis\u5BC6\u7801"}],children:(0,e.jsx)(M.Z,{placeholder:"\u8F93\u5165redis\u5BC6\u7801"})}),(0,e.jsx)(g.Z.Item,{label:"db",name:"db",rules:[{required:!1,message:"\u8F93\u5165redis\u5BC6\u7801"}],children:(0,e.jsx)(X.Z,{placeholder:"\u8F93\u5165db\uFF0C\u9ED8\u8BA4\u4E3A0(\u96C6\u7FA4\u4E0D\u9700\u8981db)",style:{width:"100%"}})}),(0,e.jsx)(g.Z.Item,{label:"\u7C7B\u578B",name:"cluster",rules:[{required:!0,message:"\u9009\u62E9redis\u7C7B\u578B"}],children:(0,e.jsxs)(T.Z,{placeholder:"\u9009\u62E9redis\u7C7B\u578B",children:[(0,e.jsx)(r,{value:!0,children:"\u96C6\u7FA4"}),(0,e.jsx)(r,{value:!1,children:"\u5B9E\u4F8B"})]})})]}))}),(0,e.jsx)(ne.Z,{columns:p,dataSource:P,rowKey:function(y){return y.id},loading:d.effects["gconfig/listRedisConfig"]})]})})};L.default=(0,z.connect)(function(o){var l=o.gconfig,c=o.loading;return{gconfig:l,loading:c}})(a)},86738:function(ae,L,t){t.d(L,{Z:function(){return u}});var K=t(26702),O=t(94184),_=t.n(O),m=t(21770),U=t(15105),i=t(67294),G=t(98423),D=t(53124),J=t(55241),T=t(96159),V=t(71577),Q=t(87149),g=t(86743),k=t(74342),q=t(24457),I=t(81643),M=t(60590),oe=t(67968);const ee=e=>{const{componentCls:r,iconCls:a,zIndexPopup:o,colorText:l,colorWarning:c,marginXS:d,fontSize:s,fontWeightStrong:h,lineHeight:P}=e;return{[r]:{zIndex:o,[`${r}-inner-content`]:{color:l},[`${r}-message`]:{position:"relative",marginBottom:d,color:l,fontSize:s,display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${r}-message-icon ${a}`]:{color:c,fontSize:s,flex:"none",lineHeight:1,paddingTop:(Math.round(s*P)-s)/2},"&-title":{flex:"auto",marginInlineStart:d},"&-title-only":{fontWeight:h}},[`${r}-description`]:{position:"relative",marginInlineStart:s+d,marginBottom:d,color:l,fontSize:s},[`${r}-buttons`]:{textAlign:"end",button:{marginInlineStart:d}}}}};var X=(0,oe.Z)("Popconfirm",e=>ee(e),e=>{const{zIndexPopupBase:r}=e;return{zIndexPopup:r+60}}),ne=function(e,r){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)r.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(a[o[l]]=e[o[l]]);return a};const z=e=>{const{prefixCls:r,okButtonProps:a,cancelButtonProps:o,title:l,description:c,cancelText:d,okText:s,okType:h="primary",icon:P=i.createElement(K.Z,null),showCancel:Z=!0,close:H,onConfirm:F,onCancel:R}=e,{getPrefixCls:B}=i.useContext(D.E_);return i.createElement(k.Z,{componentName:"Popconfirm",defaultLocale:q.Z.Popconfirm},x=>i.createElement("div",{className:`${r}-inner-content`},i.createElement("div",{className:`${r}-message`},P&&i.createElement("span",{className:`${r}-message-icon`},P),i.createElement("div",{className:_()(`${r}-message-title`,{[`${r}-message-title-only`]:!!c})},(0,I.Z)(l))),c&&i.createElement("div",{className:`${r}-description`},(0,I.Z)(c)),i.createElement("div",{className:`${r}-buttons`},Z&&i.createElement(V.ZP,Object.assign({onClick:R,size:"small"},o),d!=null?d:x.cancelText),i.createElement(g.Z,{buttonProps:Object.assign(Object.assign({size:"small"},(0,Q.n)(h)),a),actionFn:F,close:H,prefixCls:B("btn"),quitOnNullishReturnValue:!0,emitEvent:!0},s!=null?s:x.okText))))};function N(e){const{prefixCls:r,placement:a,className:o,style:l}=e,c=ne(e,["prefixCls","placement","className","style"]),{getPrefixCls:d}=i.useContext(D.E_),s=d("popconfirm",r),[h]=X(s);return h(i.createElement(M.ZP,{placement:a,className:_()(s,o),style:l,content:i.createElement(z,Object.assign({prefixCls:s},c))}))}var n=function(e,r){var a={};for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&r.indexOf(o)<0&&(a[o]=e[o]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,o=Object.getOwnPropertySymbols(e);l<o.length;l++)r.indexOf(o[l])<0&&Object.prototype.propertyIsEnumerable.call(e,o[l])&&(a[o[l]]=e[o[l]]);return a};const f=i.forwardRef((e,r)=>{const{getPrefixCls:a}=i.useContext(D.E_),[o,l]=(0,m.Z)(!1,{value:e.open,defaultValue:e.defaultOpen}),c=(p,E)=>{var j;l(p,!0),(j=e.onOpenChange)===null||j===void 0||j.call(e,p,E)},d=p=>{c(!1,p)},s=p=>{var E;return(E=e.onConfirm)===null||E===void 0?void 0:E.call(void 0,p)},h=p=>{var E;c(!1,p),(E=e.onCancel)===null||E===void 0||E.call(void 0,p)},P=p=>{p.keyCode===U.Z.ESC&&o&&c(!1,p)},Z=p=>{const{disabled:E=!1}=e;E||c(p)},{prefixCls:H,placement:F="top",trigger:R="click",okType:B="primary",icon:x=i.createElement(K.Z,null),children:S,overlayClassName:A}=e,Y=n(e,["prefixCls","placement","trigger","okType","icon","children","overlayClassName"]),b=a("popconfirm",H),te=_()(b,A),[re]=X(b);return re(i.createElement(J.Z,Object.assign({},(0,G.Z)(Y,["title"]),{trigger:R,placement:F,onOpenChange:Z,open:o,ref:r,overlayClassName:te,content:i.createElement(z,Object.assign({okType:B,icon:x},e,{prefixCls:b,close:d,onConfirm:s,onCancel:h})),"data-popover-inject":!0}),(0,T.Tm)(S,{onKeyDown:p=>{var E,j;i.isValidElement(S)&&((j=S==null?void 0:(E=S.props).onKeyDown)===null||j===void 0||j.call(E,p)),P(p)}})))});f._InternalPanelDoNotUseOrYouWillBeFired=N;var u=f},51904:function(ae,L,t){t.d(L,{Z:function(){return N}});var K=t(62208),O=t(94184),_=t.n(O),m=t(67294),U=t(53124),i=t(98787),G=t(45353),D=t(67968),J=t(45503);function T(n){return typeof n!="string"?n:n.charAt(0).toUpperCase()+n.slice(1)}var V=t(63443),Q=t(14747);const g=(n,f,u)=>{const e=T(u);return{[`${n.componentCls}-${f}`]:{color:n[`color${u}`],background:n[`color${e}Bg`],borderColor:n[`color${e}Border`]}}},k=n=>(0,V.j)(n,(f,u)=>{let{textColor:e,lightBorderColor:r,lightColor:a,darkColor:o}=u;return{[`${n.componentCls}-${f}`]:{color:e,background:a,borderColor:r,"&-inverse":{color:n.colorTextLightSolid,background:o,borderColor:o}}}}),q=n=>{const{paddingXXS:f,lineWidth:u,tagPaddingHorizontal:e,componentCls:r}=n,a=e-u,o=f-u;return{[r]:Object.assign(Object.assign({},(0,Q.Wf)(n)),{display:"inline-block",height:"auto",marginInlineEnd:n.marginXS,paddingInline:a,fontSize:n.tagFontSize,lineHeight:`${n.tagLineHeight}px`,whiteSpace:"nowrap",background:n.tagDefaultBg,border:`${n.lineWidth}px ${n.lineType} ${n.colorBorder}`,borderRadius:n.borderRadiusSM,opacity:1,transition:`all ${n.motionDurationMid}`,textAlign:"start",[`&${r}-rtl`]:{direction:"rtl"},"&, a, a:hover":{color:n.tagDefaultColor},[`${r}-close-icon`]:{marginInlineStart:o,color:n.colorTextDescription,fontSize:n.tagIconSize,cursor:"pointer",transition:`all ${n.motionDurationMid}`,"&:hover":{color:n.colorTextHeading}},[`&${r}-has-color`]:{borderColor:"transparent",[`&, a, a:hover, ${n.iconCls}-close, ${n.iconCls}-close:hover`]:{color:n.colorTextLightSolid}},["&-checkable"]:{backgroundColor:"transparent",borderColor:"transparent",cursor:"pointer",[`&:not(${r}-checkable-checked):hover`]:{color:n.colorPrimary,backgroundColor:n.colorFillSecondary},"&:active, &-checked":{color:n.colorTextLightSolid},"&-checked":{backgroundColor:n.colorPrimary,"&:hover":{backgroundColor:n.colorPrimaryHover}},"&:active":{backgroundColor:n.colorPrimaryActive}},["&-hidden"]:{display:"none"},[`> ${n.iconCls} + span, > span + ${n.iconCls}`]:{marginInlineStart:a}})}};var I=(0,D.Z)("Tag",n=>{const{fontSize:f,lineHeight:u,lineWidth:e,fontSizeIcon:r}=n,a=Math.round(f*u),o=n.fontSizeSM,l=a-e*2,c=n.colorFillAlter,d=n.colorText,s=(0,J.TS)(n,{tagFontSize:o,tagLineHeight:l,tagDefaultBg:c,tagDefaultColor:d,tagIconSize:r-2*e,tagPaddingHorizontal:8});return[q(s),k(s),g(s,"success","Success"),g(s,"processing","Info"),g(s,"error","Error"),g(s,"warning","Warning")]}),M=function(n,f){var u={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&f.indexOf(e)<0&&(u[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(n);r<e.length;r++)f.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(n,e[r])&&(u[e[r]]=n[e[r]]);return u},ee=n=>{var{prefixCls:f,className:u,checked:e,onChange:r,onClick:a}=n,o=M(n,["prefixCls","className","checked","onChange","onClick"]);const{getPrefixCls:l}=m.useContext(U.E_),c=Z=>{r==null||r(!e),a==null||a(Z)},d=l("tag",f),[s,h]=I(d),P=_()(d,{[`${d}-checkable`]:!0,[`${d}-checkable-checked`]:e},u,h);return s(m.createElement("span",Object.assign({},o,{className:P,onClick:c})))},X=function(n,f){var u={};for(var e in n)Object.prototype.hasOwnProperty.call(n,e)&&f.indexOf(e)<0&&(u[e]=n[e]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,e=Object.getOwnPropertySymbols(n);r<e.length;r++)f.indexOf(e[r])<0&&Object.prototype.propertyIsEnumerable.call(n,e[r])&&(u[e[r]]=n[e[r]]);return u};const ne=(n,f)=>{var{prefixCls:u,className:e,style:r,children:a,icon:o,color:l,onClose:c,closeIcon:d,closable:s=!1}=n,h=X(n,["prefixCls","className","style","children","icon","color","onClose","closeIcon","closable"]);const{getPrefixCls:P,direction:Z}=m.useContext(U.E_),[H,F]=m.useState(!0);m.useEffect(()=>{"visible"in h&&F(h.visible)},[h.visible]);const R=(0,i.o2)(l)||(0,i.yT)(l),B=Object.assign({backgroundColor:l&&!R?l:void 0},r),x=P("tag",u),[S,A]=I(x),Y=_()(x,{[`${x}-${l}`]:R,[`${x}-has-color`]:l&&!R,[`${x}-hidden`]:!H,[`${x}-rtl`]:Z==="rtl"},e,A),b=w=>{w.stopPropagation(),c==null||c(w),!w.defaultPrevented&&F(!1)},te=()=>s?d?m.createElement("span",{className:`${x}-close-icon`,onClick:b},d):m.createElement(K.Z,{className:`${x}-close-icon`,onClick:b}):null,re=typeof h.onClick=="function"||a&&a.type==="a",p=o||null,E=p?m.createElement(m.Fragment,null,p,m.createElement("span",null,a)):a,j=m.createElement("span",Object.assign({},h,{ref:f,className:Y,style:B}),E,te());return S(re?m.createElement(G.Z,null,j):j)},z=m.forwardRef(ne);z.CheckableTag=ee;var N=z}}]);
