"use strict";(self.webpackChunkpity=self.webpackChunkpity||[]).push([[8928],{20659:function(Zt,Fe,e){var xe=e(97857),u=e.n(xe),se=e(19478),g=e(34041),P=e(96365),V=e(49288),je=e(53575),s=e(99612),W=e(85893),m=g.Z.Option,L=P.Z.TextArea,C=[{label:"${response}",value:"${response}"},{label:"${status_code}",value:"${status_code}"}];Fe.Z={CaseAsserts:[{name:"name",label:"\u9A8C\u8BC1\u70B9",required:!0,message:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u70B9",type:"input",placeholder:"\u8BF7\u8F93\u5165\u9A8C\u8BC1\u70B9",component:null,span:24},{name:"assert_type",label:"\u6821\u9A8C\u65B9\u5F0F",required:!0,component:(0,W.jsx)(g.Z,{placeholder:"\u9009\u62E9\u6821\u9A8C\u65B9\u5F0F\uFF0C\u652F\u6301JSON\u6DF1\u5C42\u6B21\u5224\u65AD",children:Object.keys(se.Z.ASSERT_TYPE).map(function(A){return(0,W.jsx)(m,{value:A,children:se.Z.ASSERT_TYPE[A]},A)})}),type:"select",span:24},{name:"expected",label:"\u9884\u671F\u7ED3\u679C",required:!0,message:"\u8BF7\u8F93\u5165\u9884\u671F\u7ED3\u679C",component:(0,W.jsx)(V.Z,{options:[],children:(0,W.jsx)(L,{placeholder:"\u8BF7\u8F93\u5165\u9884\u671F\u7ED3\u679C\uFF0C\u652F\u6301\u53D8\u91CF\u54E6"})}),span:24},{name:"actually",label:"\u5B9E\u9645\u7ED3\u679C",required:!0,message:"\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C",component:(0,W.jsx)(V.Z,{options:C,children:(0,W.jsx)(L,{placeholder:"\u8BF7\u8F93\u5165\u5B9E\u9645\u7ED3\u679C\uFF0C\u652F\u6301\u53D8\u91CF\u54E6"})}),span:24}],CaseDetail:[{name:"name",label:"\u573A\u666F\u540D\u79F0",required:!0,message:"\u8BF7\u8F93\u5165\u573A\u666F\u540D\u79F0",type:"input",placeholder:"\u8BF7\u8F93\u5165\u573A\u666F\u540D\u79F0",component:null,span:8},{name:"priority",label:"\u4F18\u5148\u7EA7",required:!0,component:(0,W.jsx)(g.Z,{placeholder:"\u8BF7\u9009\u62E9\u4F18\u5148\u7EA7",children:se.Z.PRIORITY.map(function(A){return(0,W.jsx)(m,{value:A,children:A},A)})}),type:"select",span:8},{name:"status",label:"\u72B6\u6001",required:!0,component:(0,W.jsx)(g.Z,{placeholder:"\u8BF7\u9009\u62E9\u5F53\u524D\u573A\u666F\u72B6\u6001",children:Object.keys(se.Z.CASE_STATUS).map(function(A){return(0,W.jsx)(m,{value:A,children:(0,W.jsx)(je.Z,u()({},se.Z.CASE_BADGE[A]))},A)})}),type:"select",span:8},{name:"request_type",label:"\u8BF7\u6C42\u7C7B\u578B",required:!0,component:(0,W.jsx)(g.Z,{placeholder:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u534F\u8BAE",children:Object.keys(s.XN).map(function(A){return(0,W.jsx)(m,{value:A,disabled:A!=="1",children:s.XN[A]},A)})}),type:"select",span:8},{name:"tag",label:"\u573A\u666F\u6807\u7B7E",required:!1,component:(0,W.jsx)(g.Z,{mode:"tags",placeholder:"\u8BF7\u8F93\u5165\u573A\u666F\u6807\u7B7E"}),type:"select",span:8},{name:"case_type",label:"\u573A\u666F\u7C7B\u578B",required:!0,component:(0,W.jsxs)(g.Z,{placeholder:"\u8BF7\u9009\u62E9\u573A\u666F\u7C7B\u578B",children:[(0,W.jsx)(m,{value:0,children:"\u666E\u901A\u573A\u666F"}),(0,W.jsx)(m,{value:1,children:"\u524D\u7F6E\u573A\u666F"}),(0,W.jsx)(m,{value:2,children:"\u6570\u636E\u5DE5\u5382"})]}),type:"select",span:8}],Environment:[{name:"name",label:"\u73AF\u5883\u540D\u79F0",required:!0,message:"\u8BF7\u8F93\u5165\u73AF\u5883\u540D\u79F0",type:"input",placeholder:"\u8BF7\u8F93\u5165\u73AF\u5883\u540D\u79F0",component:null,span:24},{name:"remarks",label:"\u5907\u6CE8",required:!1,message:"\u8BF7\u8F93\u5165\u5907\u6CE8",placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8",component:(0,W.jsx)(P.Z.TextArea,{maxLength:200}),span:24}]}},26194:function(Zt,Fe,e){e.d(Fe,{Z:function(){return J}});var xe=e(12444),u=e.n(xe),se=e(72004),g=e.n(se),P=e(31996),V=e.n(P),je=e(26037),s=e.n(je),W=e(67294),m=e(53239),L=e.n(m),C=e(74981),A=e(82679),x=e.n(A),l=e(5619),Re=e.n(l),I=e(41612),H=e.n(I),te=e(90252),a=e.n(te),n=e(85893),J=function(M){V()(F,M);var ut=s()(F);function F(){return u()(this,F),ut.apply(this,arguments)}return g()(F,[{key:"componentDidMount",value:function(){var t=this;this.props.setEditor(this.refs),(0,A.addCompleter)({getCompletions:function(be,B,Ze,de,Le){Le(null,(t.props.tables||[]).map(function(ge){return{name:ge,value:ge}}))}})}},{key:"render",value:function(){var t=this.props,ye=t.value,be=t.onChange,B=t.height,Ze=t.readOnly,de=t.theme;return(0,n.jsx)(C.ZP,{ref:"aceEditor",mode:"json",theme:de||"material-one-dark",fontSize:14,showGutter:!0,showPrintMargin:!1,onChange:be,value:ye,wrapEnabled:!0,highlightActiveLine:!0,enableSnippets:!0,style:{width:"100%",height:B||300},setOptions:{readOnly:Ze||!1,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,enableSnippets:!0,showLineNumbers:!0,tabSize:4,useWorker:!0}})}}]),F}(W.Component)},99612:function(Zt,Fe,e){e.d(Fe,{e5:function(){return A},mi:function(){return C},dh:function(){return L},XN:function(){return W}});var xe=e(63100),u=e(97857),se=e.n(u),g=e(37594),P=e(85893),V=function(x){var l=x.icon,Re=x.text,I=x.font,H=I===void 0?13:I,te=x.style,a=x.onClick,n=x.back,J=n===void 0?!0:n;return J?(0,P.jsxs)("span",{onClick:a,style:se()({},te),children:[(0,P.jsx)(g.B,{type:l,style:{fontSize:H}})," ",Re]}):(0,P.jsxs)("span",{onClick:a,style:se()({},te),children:[Re," ",(0,P.jsx)(g.B,{style:{fontSize:H},type:l})]})},je=e(67294),s=e(51904),W={1:(0,P.jsxs)("span",{children:[(0,P.jsx)(xe.Z,{theme:"outline",size:"14",fill:"#7ed321"})," HTTP"]}),2:(0,P.jsx)(V,{font:14,icon:"icon-GRPC",text:"GRPC"}),3:(0,P.jsx)(V,{font:14,icon:"icon-a-dubbo1",text:"Dubbo"})},m={1:(0,P.jsx)(s.Z,{color:"success",children:"HTTP"}),2:(0,P.jsx)(s.Z,{color:"orange",children:"GRPC"}),3:(0,P.jsx)(s.Z,{color:"blue",children:"DUBBO"})},L={GET:(0,P.jsx)(s.Z,{color:"success",children:"GET"}),POST:(0,P.jsx)(s.Z,{color:"blue",children:"POST"}),PUT:(0,P.jsx)(s.Z,{color:"cyan",children:"PUT"}),DELETE:(0,P.jsx)(s.Z,{color:"error",children:"DELETE"})},C={0:(0,P.jsx)(s.Z,{children:"\u666E\u901A"}),1:(0,P.jsx)(s.Z,{color:"blue",children:"\u6D4B\u8BD5\u8BA1\u5212"}),2:(0,P.jsx)(s.Z,{color:"success",children:"CI"}),3:(0,P.jsx)(s.Z,{children:"\u5176\u4ED6"})},A={0:(0,P.jsx)(s.Z,{color:"success",style:{marginLeft:8},children:"\u666E\u901A"}),1:(0,P.jsx)(s.Z,{color:"blue",style:{marginLeft:8},children:"\u524D\u7F6E"}),2:(0,P.jsx)(s.Z,{color:"warning",style:{marginLeft:8},children:"\u6570\u636E\u5DE5\u5382"})}},22763:function(Zt,Fe,e){var xe=e(32983),u=e(82759),se=e(85893);Fe.Z=function(g){var P=g.desc,V=g.height,je=V===void 0?180:V,s=g.image,W=s===void 0?u.Z:s;return(0,se.jsx)(xe.Z,{image:W,imageStyle:{height:je},description:P||"\u6682\u65E0\u6570\u636E"})}},7624:function(Zt,Fe,e){var xe=e(20873),u=e(32983),se=e(85893);Fe.Z=function(g){var P=g.desc,V=g.height,je=V===void 0?180:V;return(0,se.jsx)(u.Z,{image:xe.Z,imageStyle:{height:je},description:P||"\u6682\u65E0\u6570\u636E"})}},84298:function(Zt,Fe,e){var xe=e(97857),u=e.n(xe),se=e(5574),g=e.n(se),P=e(67294),V=e(52445),je=e(85576),s=e(15746),W=e(76081),m=e(85893),L=V.Z.Item,C=function(x){var l=x.title,Re=x.width,I=x.left,H=x.right,te=x.formName,a=x.record,n=x.onFinish,J=x.loading,M=x.fields,ut=x.open,F=x.onCancel,Ne=x.offset,t=Ne===void 0?0:Ne,ye=x.children,be=x.Footer,B=x.onTest,Ze=V.Z.useForm(),de=g()(Ze,1),Le=de[0],ge=function(){Le.validateFields().then(function(ne){n(ne)})};(0,P.useEffect)(function(){Le.resetFields(),Le.setFieldsValue(a)},[a]);var p={labelCol:{span:I},wrapperCol:{span:H}};return(0,m.jsxs)(je.Z,{style:{marginTop:t},confirmLoading:J,footer:be!==void 0?(0,m.jsx)(be,{onOk:ge,onCancel:F,onTest:function(){Le.validateFields().then(function(ne){B(ne)})}}):void 0,title:l,width:Re,open:ut,onOk:ge,onCancel:F,children:[ye||null,(0,m.jsx)(V.Z,u()(u()({form:Le},p),{},{name:te,initialValues:a,onFinish:n,children:M.map(function(E,ne){return(0,m.jsx)(s.Z,{span:E.span||24,children:(0,m.jsx)(L,{label:E.label,colon:E.colon||!0,initialValue:E.initialValue,rules:[{required:E.required,message:E.message}],name:E.name,valuePropName:E.valuePropName||"value",children:(0,W.Z)(E.type,E.placeholder,E.component)})},ne)})}))]})};Fe.Z=C},76081:function(Zt,Fe,e){var xe=e(96365),u=e(72269),se=e(67294),g=e(85893),P=xe.Z.TextArea,V=function(s,W){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0;return m||(s==="input"?(0,g.jsx)(xe.Z,{placeholder:W}):s==="textarea"?(0,g.jsx)(P,{placeholder:W}):s==="switch"?(0,g.jsx)(u.Z,{}):null)};Fe.Z=V},56262:function(Zt,Fe,e){e.d(Fe,{Z:function(){return ge}});var xe=e(67294),u=e(34041),se=e(96365),g=e(71230),P=e(15746),V=e(15009),je=e.n(V),s=e(19632),W=e.n(s),m=e(99289),L=e.n(m),C=e(5574),A=e.n(C),x=e(97857),l=e.n(x),Re=e(13769),I=e.n(Re),H=e(52445),te=e(45360),a=e(86738),n=e(96021),J=e(96074),M=e(71577),ut=e(64997),F=e(51042),Ne=e(19478),t=e(85893),ye=["editing","dataIndex","title","type","setType","record","index","key","children"],be=u.Z.Option,B=function(E){var ne=E.editing,r=E.dataIndex,q=E.title,he=E.type,ae=E.setType,Ve=E.record,Qe=E.index,Xe=E.key,T=E.children,Y=I()(E,ye);return(0,t.jsx)("td",l()(l()({},Y),{},{children:ne?(0,t.jsx)(H.Z.Item,{name:r,style:{margin:0},initialValue:Ve.dataIndex,rules:[{required:!0,message:"Please Input ".concat(q,"!")}],children:(0,t.jsx)(se.Z,{placeholder:"please input ".concat(q)})}):T}))},Ze=function(E){var ne=E.data,r=E.setData,q=E.ossFileList,he=H.Z.useForm(),ae=A()(he,1),Ve=ae[0],Qe=(0,xe.useState)(""),Xe=A()(Qe,2),T=Xe[0],Y=Xe[1],He=(0,xe.useState)("FILE"),Ge=A()(He,2),Ae=Ge[0],_e=Ge[1],qe=(0,xe.useState)(null),Ye=A()(qe,2),Je=Ye[0],yt=Ye[1],ot=function(K){return K.key===T},vt=function(K){Ve.setFieldsValue(l()({},K)),Y(K.key)},Et=function(){Y("")},bt=function(){var S=L()(je()().mark(function K(b){var Q,$,pt,le,Bt;return je()().wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Ee.prev=0,Ee.next=3,Ve.validateFields();case 3:if(Q=Ee.sent,!(Ae==="FILE"&&!Je)){Ee.next=7;break}return te.ZP.info("\u8BF7\u9009\u62E9\u6587\u4EF6"),Ee.abrupt("return");case 7:if($=W()(ne),pt=$.findIndex(function(Z){return b===Z.key}),!(pt>-1)){Ee.next=20;break}if(le=$[pt],Bt=$.findIndex(function(Z){return Q.key===Z.key}),!(Bt>-1)){Ee.next=15;break}return te.ZP.info("\u8BE5key\u5DF2\u5B58\u5728"),Ee.abrupt("return");case 15:$.splice(pt,1,l()(l()(l()({},le),Q),{},{type:Ae,value:Je})),r($),Y(""),Ee.next=23;break;case 20:$.push(l()(l()({},Q),{},{type:Ae,value:Je})),r($),Y("");case 23:Ee.next=28;break;case 25:Ee.prev=25,Ee.t0=Ee.catch(0),console.log("Validate Failed:",Ee.t0);case 28:case"end":return Ee.stop()}},K,null,[[0,25]])}));return function(b){return S.apply(this,arguments)}}(),At=function(K){var b=W()(ne);b.splice(b.findIndex(function(Q){return K===Q.key}),1),r(b)},it=[{title:"KEY",dataIndex:"key",width:"30%",editable:!0},{title:"TYPE",dataIndex:"type",type:"select",width:"10%",render:function(K,b){return b.key===T?(0,t.jsxs)(u.Z,{style:{width:"100%"},value:Ae,onChange:function($){_e($)},children:[(0,t.jsx)(be,{value:"FILE",children:"FILE"}),(0,t.jsx)(be,{value:"TEXT",children:"TEXT"})]}):b.type}},{title:"VALUE",dataIndex:"value",width:"40%",render:function(K,b){return b.key===T?Ae==="FILE"?(0,t.jsx)(u.Z,{style:{width:"100%"},placeholder:"please select oss file",showSearch:!0,value:Je,onChange:function($){return yt($)},children:q.map(function(Q){return(0,t.jsx)(be,{value:Q.file_path,children:Q.file_path},Q.file_path)})}):(0,t.jsx)(se.Z,{placeholder:"please input VALUE",value:Je,onChange:function($){yt($.target.value)}}):Ae==="FILE"?(0,t.jsx)("a",{href:"".concat(Ne.Z.URL,"/oss/download?filepath=").concat(b.value),children:b.value}):b.value}},{title:"OPERATION",dataIndex:"operation",render:function(K,b){var Q=ot(b);return Q?(0,t.jsxs)("span",{children:[(0,t.jsx)("a",{onClick:function(){return bt(b.key)},style:{marginRight:8},children:"Save"}),(0,t.jsx)(a.Z,{title:"Sure to cancel?",onConfirm:Et,children:(0,t.jsx)("a",{children:"Cancel"})})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.Z.Link,{disabled:T!=="",onClick:function(){return vt(b)},children:"Edit"}),(0,t.jsx)(J.Z,{type:"vertical"}),(0,t.jsx)(n.Z.Link,{disabled:T!=="",onClick:function(){return At(b.key)},children:"Remove"})]})}}],et=function(){var K=[].concat(W()(ne),[{key:"",type:"TEXT",value:null}]);r(K),_e("FILE")},xt=it.map(function(S){return S.editable?l()(l()({},S),{},{onCell:function(b,Q){return{record:b,index:Q,type:Ae,setType:_e,dataIndex:S.dataIndex,title:S.title,editing:ot(b)}}}):S});return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Z,{style:{marginBottom:12},children:(0,t.jsx)(P.Z,{span:6,children:(0,t.jsx)(M.ZP,{type:"primary",onClick:et,icon:(0,t.jsx)(F.Z,{}),children:"Add"})})}),(0,t.jsx)(H.Z,{form:Ve,component:!1,children:(0,t.jsx)(ut.Z,{components:{body:{cell:B}},dataSource:ne,columns:xt,rowClassName:"editable-row",pagination:{onChange:Et}})})]})},de=Ze,Le=u.Z.Option,ge=function(p){var E=p.ossFileList,ne=p.dataSource,r=p.setDataSource,q=[{title:"KEY",dataIndex:"key",render:function(){return(0,t.jsx)(se.Z,{})}},{title:"VALUE",dataIndex:"value",render:function(){return(0,t.jsx)(u.Z,{children:E.map(function(ae){return(0,t.jsx)(Le,{value:ae.key,children:ae.key},ae.key)})})}}];return(0,t.jsx)(g.Z,{gutter:8,style:{marginTop:16},children:(0,t.jsx)(P.Z,{span:24,children:(0,t.jsx)(de,{bordered:!0,columns:q,data:ne,setData:r,ossFileList:E})})})}},15106:function(Zt,Fe,e){var xe=e(9783),u=e.n(xe),se=e(15009),g=e.n(se),P=e(99289),V=e.n(P),je=e(52677),s=e.n(je),W=e(5574),m=e.n(W),L=e(67294),C=e(34041),A=e(48055),x=e(26855),l=e(75308),Re=e(71230),I=e(15746),H=e(4393),te=e(52445),a=e(83062),n=e(96365),J=e(71577),M=e(55742),ut=e(85418),F=e(64997),Ne=e(65987),t=e(31484),ye=e(63783),be=e(34804),B=e(53677),Ze=e(12414),de=e(10981),Le=e(89609),ge=e(56262),p=e(90596),E=e(26194),ne=e(37594),r=e(85893),q=C.Z.Option,he=A.Z.TabPane,ae={200:{color:"#67C23A",text:"OK"},401:{color:"#F56C6C",text:"unauthorized"},400:{color:"#F56C6C",text:"Bad Request"}},Ve=function(T){return T&&T.response?(0,r.jsx)("div",{style:{marginRight:16},children:(0,r.jsxs)("span",{children:["Status:",(0,r.jsxs)("span",{style:{color:ae[T.status_code]?ae[T.status_code].color:"#F56C6C",marginLeft:8,marginRight:8},children:[T.status_code," ",ae[T.status_code]?ae[T.status_code].text:""]}),(0,r.jsxs)("span",{style:{marginLeft:8,marginRight:8},children:["Time: ",(0,r.jsx)("span",{style:{color:"#67C23A"},children:T.cost})]})]})}):null},Qe=function(T){var Y=T.form,He=T.gconfig,Ge=T.dispatch,Ae=T.body,_e=T.setBody,qe=T.headers,Ye=T.setHeaders,Je=T.formData,yt=T.setFormData,ot=T.caseInfo,vt=T.bodyType,Et=T.setBodyType,bt=T.save,At=bt===void 0?null:bt,it=(0,L.useState)("JSON"),et=m()(it,2),xt=et[0],S=et[1],K=(0,L.useState)("GET"),b=m()(K,2),Q=b[0],$=b[1],pt=(0,L.useState)([]),le=m()(pt,2),Bt=le[0],ct=le[1],Ee=(0,L.useState)(function(){return Bt.map(function(f){return f.id})}),Z=m()(Ee,2),h=Z[0],R=Z[1],ee=(0,L.useState)(function(){return qe.map(function(f){return f.id})}),Te=m()(ee,2),Ue=Te[0],We=Te[1],ie=(0,L.useState)(!1),Be=m()(ie,2),tt=Be[0],O=Be[1],d=(0,L.useState)({}),i=m()(d,2),j=i[0],re=i[1],G=(0,L.useState)(""),z=m()(G,2),we=z[0],ue=z[1],X=(0,L.useState)(null),ce=m()(X,2),$e=ce[0],pe=ce[1],De=(0,L.useState)(!1),k=m()(De,2),fe=k[0],nt=k[1],lt=He.ossFileList,gt=He.envMap,Ke=He.addressList,w=function(){if(Ae){var c=JSON.parse(Ae);s()(c)==="object"&&c[0]!==void 0&&yt(c)}};(0,L.useEffect)(function(){ot&&$(ot.request_method)},[ot.request_method]),(0,L.useEffect)(function(){if(vt===2){Ge({type:"gconfig/listOssFile"});try{w()}catch(f){}}},[vt]),(0,L.useEffect)(function(){Ge({type:"gconfig/fetchAddress"})},[]);var me=function(){var f=V()(g()().mark(function c(){return g()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:ue(Y.getFieldValue("url")),Ie(Y.getFieldValue("url"));case 2:case"end":return D.stop()}},c)}));return function(){return f.apply(this,arguments)}}();(0,L.useEffect)(function(){me()},[Ae]);var Oe=[{title:"KEY",dataIndex:"key",key:"key"},{title:"VALUE",dataIndex:"value",key:"value"}],at=function(c){if(!j[c])return[];var o=JSON.parse(j[c]);return Object.keys(o).map(function(D){return{key:D,value:o[D]}})},Se=function(c){var o=Y.getFieldValue("url"),D;o===void 0?D="":D=o.split("?")[0],c.forEach(function(_,oe){_.key&&(oe===0?D="".concat(D,"?").concat(_.key,"=").concat(_.value||""):D="".concat(D,"&").concat(_.key,"=").concat(_.value||""))}),Y.setFieldsValue({url:D})},Ie=function(c){if(!!c){var o=c.split("?");if(o.length<2)ct([]);else{var D=o[1].split("&"),_=[],oe=[];D.forEach(function(ke,jt){var Ot=ke.split("="),St=m()(Ot,2),Lt=St[0],Ut=St[1],It=Date.now();oe.push(It+jt+10),_.push({key:Lt,value:Ut,id:It+jt+10,description:""})}),ct(_),R(oe)}}},dt=function(c){S(c)},ze=function(){var c={};return qe.forEach(function(o){o.key!==""&&(c[o.key]=o.value)}),c},Ct=function(){var f=V()(g()().mark(function c(){var o,D,_;return g()().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:if(o=Y.getFieldValue("url"),o!==""){ke.next=4;break}return x.Z.error({message:"\u8BF7\u6C42Url\u4E0D\u80FD\u4E3A\u7A7A"}),ke.abrupt("return");case 4:return O(!0),D={method:Q||"GET",url:o,body:Ae,body_type:vt,headers:ze()},vt===0&&(D.body=null),ke.next=9,(0,Ze.c3)(D);case 9:_=ke.sent,O(!1),de.Z.response(_,!0)&&re(_.data);case 12:case"end":return ke.stop()}},c)}));return function(){return f.apply(this,arguments)}}(),Pe=function(c,o){if(c==="params"){var D=Bt.filter(function(oe){return oe.id!==o});ct(D),Se(D)}else{var _=qe.filter(function(oe){return oe.id!==o});Ye(_)}},ft=(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(l.Z.Item,{children:(0,r.jsx)("a",{onClick:function(){dt("Text")},children:"Text"})},"Text"),(0,r.jsx)(l.Z.Item,{children:(0,r.jsx)("a",{onClick:function(){dt("JavaScript")},children:"JavaScript"})},"JavaScript"),(0,r.jsx)(l.Z.Item,{children:(0,r.jsx)("a",{onClick:function(){dt("JSON")},children:"JSON"})},"JSON"),(0,r.jsx)(l.Z.Item,{children:(0,r.jsx)("a",{onClick:function(){dt("HTML")},children:"HTML"})},"HTML"),(0,r.jsx)(l.Z.Item,{children:(0,r.jsx)("a",{onClick:function(){dt("XML")},children:"XML"})},"XML")]}),ve=function(c){return[{title:"KEY",key:"key",dataIndex:"key"},{title:"VALUE",key:"value",dataIndex:"value"},{title:"DESCRIPTION",key:"description",dataIndex:"description"},{title:"\u64CD\u4F5C",valueType:"option",render:function(D,_){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Ne.Z,{style:{cursor:"pointer"},onClick:function(){R([_.id])}}),(0,r.jsx)(t.Z,{style:{cursor:"pointer",marginLeft:8},onClick:function(){Pe(c,_.id)},twoToneColor:"#eb2f96"})]})}}]},Tt=function(c){return c===0?(0,r.jsx)("div",{style:{height:"20vh",lineHeight:"20vh",textAlign:"center"},children:"This request does not have a body"}):c===2?(0,r.jsx)(ge.Z,{ossFileList:lt,dataSource:Je,setDataSource:yt}):(0,r.jsx)(Re.Z,{style:{marginTop:12},children:(0,r.jsx)(I.Z,{span:24,children:(0,r.jsx)(H.Z,{bodyStyle:{padding:0},children:(0,r.jsx)(E.Z,{value:Ae,onChange:function(D){return _e(D)},height:"20vh",setEditor:pe})})})})},Dt=function(){var c={};return Ke.forEach(function(o){c[o.name]===void 0?c[o.name]=u()({},o.env,o.gateway):c[o.name][o.env]=o.gateway}),c},Ft=Dt(),st=(0,r.jsx)(te.Z.Item,{name:"base_path",noStyle:!0,children:(0,r.jsxs)(C.Z,{style:{width:130},placeholder:"\u9009\u62E9BasePath",showSearch:!0,allowClear:!0,optionLabelProp:"label",filterOption:function(c,o){return o.children.length>1?!1:o.children.props.children.indexOf(c.toLowerCase())>=0},children:[(0,r.jsxs)(q,{value:null,label:"\u65E0",children:["\u65E0",(0,r.jsx)("a",{style:{float:"right",fontSize:12},href:"/#/config/address",children:"\u53BB\u914D\u7F6E"})]}),Object.keys(Ft).map(function(f){return(0,r.jsx)(q,{value:f,label:f,children:(0,r.jsx)(a.Z,{title:(0,r.jsx)("div",{children:Object.keys(Ft[f]).map(function(c){return(0,r.jsxs)("p",{children:[gt[c],": ",Ft[f][c]]})})}),children:f})},f)})]})});return(0,r.jsxs)(te.Z,{form:Y,children:[(0,r.jsxs)(Re.Z,{gutter:[8,8],children:[(0,r.jsx)(I.Z,{span:20,children:(0,r.jsxs)(te.Z,{layout:"inline",form:Y,children:[(0,r.jsx)(I.Z,{span:8,children:(0,r.jsx)(te.Z.Item,{colon:!1,name:"request_method",label:"\u8BF7\u6C42\u65B9\u5F0F",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u8BF7\u6C42\u65B9\u6CD5"}],initialValue:Q,children:(0,r.jsxs)(C.Z,{placeholder:"\u9009\u62E9\u8BF7\u6C42\u65B9\u5F0F",onChange:function(c){return $(c)},style:{width:120,textAlign:"left"},children:[(0,r.jsx)(q,{value:"GET",children:"GET"},"GET"),(0,r.jsx)(q,{value:"POST",children:"POST"},"POST"),(0,r.jsx)(q,{value:"PUT",children:"PUT"},"PUT"),(0,r.jsx)(q,{value:"DELETE",children:"DELETE"},"DELETE")]})})}),(0,r.jsx)(I.Z,{span:16,children:(0,r.jsx)(te.Z.Item,{name:"url",colon:!1,label:(0,r.jsxs)(a.Z,{title:"\u70B9\u51FB\u53EF\u5C55\u5F00\u5168\u5C40\u53D8\u91CF\u63D0\u793A",children:["\u8BF7\u6C42\u5730\u5740",(0,r.jsx)(ye.Z,{style:{marginLeft:4},onClick:function(){return nt(!0)}})]}),rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u8BF7\u6C42url"}],children:(0,r.jsx)(n.Z,{addonBefore:st,style:{width:"100%"},placeholder:"\u8BF7\u8F93\u5165\u8981\u8BF7\u6C42\u7684url",onChange:function(c){Ie(c.target.value),Y.setFieldsValue({url:c.target.value}),ue(c.target.value)}})})})]})}),(0,r.jsx)(I.Z,{span:4,children:(0,r.jsx)("div",{style:{float:"right"},children:At?null:(0,r.jsxs)(J.ZP,{onClick:Ct,loading:tt,type:"primary",children:[(0,r.jsx)(ne.B,{type:"icon-fasong1"}),"Send"," "]})})})]}),(0,r.jsx)(Re.Z,{style:{marginTop:8},children:(0,r.jsxs)(A.Z,{defaultActiveKey:"1",style:{width:"100%"},children:[(0,r.jsx)(he,{tab:"Params",children:(0,r.jsx)(B.Z,{columns:ve("params"),title:"Query Params",dataSource:Bt,setDataSource:ct,extra:Se,editableKeys:h,setEditableRowKeys:R})},"1"),(0,r.jsx)(he,{tab:"Headers",children:(0,r.jsx)(B.Z,{columns:ve("headers"),title:"Headers",dataSource:qe,setDataSource:Ye,editableKeys:Ue,setEditableRowKeys:We})},"2"),(0,r.jsxs)(he,{tab:"Body",children:[(0,r.jsxs)(Re.Z,{children:[(0,r.jsxs)(M.ZP.Group,{defaultValue:0,value:vt,onChange:function(c){Et(c.target.value),c.target.value==="form-data"&&Ge({type:"gconfig/listOssFile"})},children:[(0,r.jsx)(M.ZP,{value:0,children:"none"}),(0,r.jsx)(M.ZP,{value:2,children:"form-data"}),(0,r.jsx)(M.ZP,{value:3,children:"x-www-form-urlencoded"}),(0,r.jsx)(M.ZP,{value:1,children:"raw"}),(0,r.jsx)(M.ZP,{value:4,children:"binary"}),(0,r.jsx)(M.ZP,{value:5,children:"GraphQL"})]}),vt===1?(0,r.jsx)(ut.Z,{style:{marginLeft:8},overlay:ft,trigger:["click"],children:(0,r.jsxs)("a",{onClick:function(c){return c.preventDefault()},children:[xt," ",(0,r.jsx)(be.Z,{})]})}):null]}),Tt(vt)]},"3")]})}),(0,r.jsx)(Re.Z,{gutter:[8,8],children:Object.keys(j).length===0?null:(0,r.jsxs)(A.Z,{style:{width:"100%"},tabBarExtraContent:Ve(j),children:[(0,r.jsx)(he,{tab:"Body",children:(0,r.jsx)(E.Z,{value:j.response,readOnly:!0,height:"30vh",setEditor:pe})},"1"),(0,r.jsx)(he,{tab:"Cookie",children:(0,r.jsx)(F.Z,{columns:Oe,dataSource:at("cookies"),size:"small",pagination:!1})},"2"),(0,r.jsx)(he,{tab:"Headers",children:(0,r.jsx)(F.Z,{columns:Oe,dataSource:at("response_headers"),size:"small",pagination:!1})},"3")]})})]})};Fe.Z=(0,p.connect)(function(Xe){var T=Xe.gconfig;return{gconfig:T}})(Qe)},53677:function(Zt,Fe,e){var xe=e(67294),u=e(13433),se=e(85893);Fe.Z=function(g){var P=g.columns,V=g.dataSource,je=g.title,s=g.setDataSource,W=g.editableKeys,m=g.setEditableRowKeys,L=g.extra;return(0,xe.useEffect)(function(){m(V.map(function(C){return C.id}))},[V]),(0,se.jsx)(u.Z,{headerTitle:je,columns:P,rowKey:"id",value:V,onChange:s,recordCreatorProps:{newRecordType:"dataSource",record:function(){return{id:Date.now()}}},editable:{type:"multiple",editableKeys:W,actionRender:function(A,x,l){return[l.delete]},onValuesChange:function(A,x){L&&L(x),s(x)},onChange:m}})}},65245:function(Zt,Fe,e){e.d(Fe,{Z:function(){return n}});var xe=e(19632),u=e.n(xe),se=e(13769),g=e.n(se),P=e(15009),V=e.n(P),je=e(99289),s=e.n(je),W=e(97857),m=e.n(W),L=e(64997),C=e(95742),A=e(53682),x=e(62748),l=e(85893),Re=["className","style"],I=(0,C.JV)(function(){return(0,l.jsx)(A.Z,{style:{cursor:"grab",color:"#999"}})}),H=[{title:"\u6392\u5E8F",dataIndex:"sort",width:65,className:"drag-visible",render:function(){return(0,l.jsx)(I,{})}}],te=(0,C.gU)(function(J){return(0,l.jsx)("tr",m()({},J))}),a=(0,C.hv)(function(J){return(0,l.jsx)("tbody",m()({},J))}),n=function(J){var M=J.dataSource,ut=J.columns,F=J.setDataSource,Ne=J.dragCallback,t=J.loading,ye=function(){var Ze=s()(V()().mark(function de(Le){var ge,p,E,ne;return V()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:if(ge=Le.oldIndex,p=Le.newIndex,ge===p){q.next=11;break}if(E=(0,x.q)([].concat(M),ge,p).filter(function(he){return!!he}),!Ne){q.next=10;break}return q.next=6,Ne(E);case 6:ne=q.sent,(ne||ne===void 0)&&F(E),q.next=11;break;case 10:F(E);case 11:case"end":return q.stop()}},de)}));return function(Le){return Ze.apply(this,arguments)}}(),be=function(de){return(0,l.jsx)(a,m()({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:ye},de))},B=function(de){var Le=de.className,ge=de.style,p=g()(de,Re),E=M.findIndex(function(ne){return ne.index===p["data-row-key"]});return(0,l.jsx)(te,m()({index:E},p))};return(0,l.jsx)(L.Z,{pagination:!1,dataSource:M,loading:t,columns:[].concat(H,u()(ut)),rowKey:"index",components:{body:{wrapper:be,row:B}}})}},80242:function(Zt,Fe,e){e.d(Fe,{Z:function(){return Ee}});var xe=e(15009),u=e.n(xe),se=e(9783),g=e.n(se),P=e(19632),V=e.n(P),je=e(97857),s=e.n(je),W=e(99289),m=e.n(W),L=e(5574),C=e.n(L),A=e(3363),x=e(71230),l=e(15746),Re=e(85265),I=e(71577),H=e(90596),te=e(37594),a=e(67294),n=e(34041),J=e(83062),M=e(72269),ut=e(16165),F=e(52445),Ne=e(76081),t=e(85893),ye=F.Z.Item,be=function(Z){var h=Z.left,R=Z.right,ee=Z.formName,Te=Z.record,Ue=Z.onFinish,We=Z.fields,ie=Z.pForm,Be=ie;if(ie===void 0){var tt=F.Z.useForm(),O=C()(tt,1),d=O[0];Be=d}var i={labelCol:{span:h},wrapperCol:{span:R}};return(0,a.useEffect)(function(){Be.setFieldsValue(Te)},[Te]),(0,t.jsx)(F.Z,s()(s()({form:Be},i),{},{name:ee,initialValues:Te,onFinish:Ue,children:(0,t.jsx)(x.Z,{gutter:8,children:We.map(function(j){return(0,t.jsx)(l.Z,{span:j.span||24,children:(0,t.jsx)(ye,s()(s()({label:j.label,colon:j.colon||!0,rules:[{required:j.required,message:j.message}],name:j.name,valuePropName:j.valuePropName||"value"},j.layout||i),{},{children:(0,Ne.Z)(j.type,j.placeholder,j.component)}))})})})}))},B=e(19478),Ze=e(26194),de=n.Z.Option,Le=function(Z){var h=Z.data,R=Z.form,ee=Z.dispatch,Te=Z.testcaseData,Ue=Z.constructorType,We=(0,a.useState)(null),ie=C()(We,2),Be=ie[0],tt=ie[1];(0,a.useEffect)(function(){ee({type:"construct/getTestCaseListTree"})},[]);var O=[{name:"name",label:"\u540D\u79F0",required:!0,type:"input",placeholder:"\u8BF7\u8F93\u5165\u6B65\u9AA4\u540D\u79F0",initialValue:h.name,span:12,layout:{labelCol:{span:8},wrapperCol:{span:16}}},{name:"constructor_case_id",label:"\u6D4B\u8BD5\u573A\u666F",required:!0,initialValue:h.constructor_case_id,placeholder:"\u8BF7\u9009\u62E9\u6D4B\u8BD5\u573A\u666F",component:(0,t.jsx)(n.Z,{placeholder:"\u8BF7\u9009\u62E9\u573A\u666F",children:Te.map(function(d){return(0,t.jsx)(de,{value:d.id,children:d.name},d.id)})}),span:12,layout:{labelCol:{span:8},wrapperCol:{span:16}}},{name:"value",label:"\u8FD4\u56DE\u503C",placeholder:"\u8BF7\u586B\u5199\u8FD4\u56DE\u53D8\u91CF\u540D\u79F0\uFF0C\u4E0D\u9700\u8981\u53EF\u4E0D\u586B",required:!1,type:"input",initialValue:h.value,span:12,layout:{labelCol:{span:8},wrapperCol:{span:16}}},{name:"public",label:(0,t.jsx)(J.Z,{title:"\u5F00\u542F\u5171\u4EAB\u540E, \u5176\u4ED6\u4EBA\u53EF\u4F7F\u7528\u4F60\u7684\u6570\u636E\u6784\u9020\u5668",children:(0,t.jsxs)("span",{children:["\u5171\u4EAB",(0,t.jsx)(ut.Z,{})]})}),required:!0,component:(0,t.jsx)(M.Z,{}),valuePropName:"checked",initialValue:h.public,span:6,layout:{labelCol:{span:16},wrapperCol:{span:8}}},{name:"enable",label:"\u542F\u7528",required:!0,component:(0,t.jsx)(M.Z,{}),valuePropName:"checked",initialValue:h.enable,span:6,layout:{labelCol:{span:16},wrapperCol:{span:8}}},{name:"params",label:"\u52A8\u6001\u53C2\u6570",required:!1,component:(0,t.jsx)(Ze.Z,{height:150,setEditor:tt})}];return(0,t.jsx)(be,{fields:O,left:4,right:20,record:h,pForm:R})},ge=e(59847),p=n.Z.Option,E=function(h){var R=h.construct,ee=h.dispatch,Te=h.suffix,Ue=Te===void 0?!0:Te,We=R.constructorData,ie=R.searchConstructor,Be=R.constructorType,tt=function(i){ee({type:"construct/save",payload:i})},O=function(){ee({type:"construct/getConstructorTree",payload:{constructor_type:Be,suffix:Ue}})};return(0,a.useEffect)(function(){O()},[Be]),(0,t.jsx)(x.Z,{style:{marginTop:24},children:(0,t.jsx)(l.Z,{span:24,children:(0,t.jsxs)(x.Z,{gutter:8,children:[(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,s()(s()({label:"\u6570\u636E\u7C7B\u578B",name:"type"},B.Z.SUB_LAYOUT),{},{children:(0,t.jsx)(n.Z,{disabled:!0,defaultValue:Be,children:Object.keys(B.Z.CONSTRUCTOR_TYPE).map(function(d){return(0,t.jsx)(p,{value:parseInt(d,10),children:B.Z.CONSTRUCTOR_TYPE[d]},d)})})}))}),(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,s()(s()({label:"\u590D\u5236\u6784\u9020\u6761\u4EF6"},B.Z.SUB_LAYOUT),{},{children:(0,t.jsx)(ge.Z,{allowClear:!0,showSearch:!0,style:{width:"100%"},value:ie,filterTreeNode:function(i,j){return j.title.toLowerCase().indexOf(i.toLowerCase())>-1},dropdownStyle:{maxHeight:600,overflow:"auto"},treeData:We,placeholder:"\u901A\u8FC7\u641C\u7D22\u6784\u9020\u6761\u4EF6\uFF0C\u53EF\u4EE5\u5FEB\u901F\u590D\u5236\u53C2\u6570\u54E6\uFF01",treeDefaultExpandAll:!0,onChange:function(i){tt({searchConstructor:i}),ee(i!==void 0?{type:"construct/getConstructorData",payload:{id:i.split("_")[1]}}:{type:"construct/save",payload:{testCaseConstructorData:{type:Be,public:!0,enable:!0}}})}})}))})]})})})},ne=(0,H.connect)(function(Z){var h=Z.loading,R=Z.construct;return{loading:h,construct:R}})(E),r=function(h){var R=h.caseId,ee=h.construct,Te=h.dispatch,Ue=h.form,We=h.onFinish,ie=h.suffix,Be=ee.testcaseData,tt=ee.testCaseConstructorData,O=ee.constructorType;return(0,t.jsx)(x.Z,{style:{marginTop:24},gutter:[8,8],children:(0,t.jsxs)(l.Z,{span:24,children:[(0,t.jsx)(ne,{suffix:ie}),(0,t.jsx)(x.Z,{gutter:8,children:(0,t.jsx)(l.Z,{span:24,children:(0,t.jsx)(Le,{data:tt,dispatch:Te,testcaseData:Be,constructorType:O,form:Ue})})})]})})},q=(0,H.connect)(function(Z){var h=Z.construct,R=Z.loading;return{construct:h,loading:R}})(r),he=e(60219),ae=e(75308),Ve=e(96365),Qe=e(26838),Xe=e(1633),T=e(63783),Y=function(){return(0,t.jsx)(J.Z,{title:"\u5F00\u542F\u5171\u4EAB\u540E, \u5176\u4ED6\u4EBA\u53EF\u4F7F\u7528\u4F60\u7684\u6570\u636E\u6784\u9020\u5668",children:(0,t.jsxs)("span",{children:["\u5171\u4EAB ",(0,t.jsx)(T.Z,{})]})})},He=n.Z.Option,Ge=function(h){var R=h.form,ee=h.dispatch,Te=h.construct,Ue=h.gconfig,We=h.suffix,ie=(0,a.useState)("1"),Be=C()(ie,2),tt=Be[0],O=Be[1],d=(0,a.useState)(null),i=C()(d,2),j=i[0],re=i[1],G=Te.testCaseConstructorData,z=Te.constructorType,we=Ue.dbConfigData,ue=function(){var $e=we.map(function(pe){return pe.name});return Array.from(new Set($e))},X=function($e){O($e.key)};return(0,a.useEffect)(function(){ee({type:"gconfig/fetchDbConfig"})},[]),(0,a.useEffect)(function(){R.resetFields(),R.setFieldsValue(G)},[G]),(0,t.jsx)(x.Z,{gutter:8,style:{marginTop:24},children:(0,t.jsx)(l.Z,{span:24,children:(0,t.jsxs)(x.Z,{gutter:8,children:[(0,t.jsx)(l.Z,{span:3,children:(0,t.jsxs)(ae.Z,{onClick:X,style:{width:128},defaultSelectedKeys:["1"],defaultOpenKeys:["1"],mode:"inline",children:[(0,t.jsx)(ae.Z.Item,{children:"\u7F16\u8F91SQL"},"1"),(0,t.jsx)(ae.Z.Item,{children:"\u8C03\u8BD5SQL"},"2")]})}),tt!=="1"?(0,t.jsx)(l.Z,{span:21,children:(0,t.jsx)(Qe.Z,{leftHeight:420,cardHeight:130,tableHeight:272,editorHeight:130,imageHeight:60})}):(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(l.Z,{span:21,children:[(0,t.jsx)(ne,{suffix:We}),(0,t.jsxs)(F.Z,s()(s()({},B.Z.SUB_LAYOUT),{},{form:R,children:[(0,t.jsxs)(x.Z,{gutter:8,children:[(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165SQL\u8BED\u53E5\u540D\u79F0"}],initialValue:G.name,children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u8F93\u5165SQL\u8BED\u53E5\u540D\u79F0"})})}),(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u6570\u636E\u5E93",name:"database",initialValue:G.database,rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u6570\u636E\u5E93\u8FDE\u63A5\u540D\u79F0, \u5982\u679C\u6CA1\u6709\u8BF7\u53BB\u3010\u6570\u636E\u5E93\u914D\u7F6E\u3011\u9875\u9762\u6DFB\u52A0"}],children:(0,t.jsx)(n.Z,{showSearch:!0,placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u5E93\u8FDE\u63A5\u540D\u79F0, \u4F1A\u6839\u636E\u73AF\u5883\u81EA\u52A8\u5BFB\u627E\u5BF9\u5E94\u7684\u6570\u636E\u5E93",children:ue().map(function(ce){return(0,t.jsx)(He,{value:ce,children:ce},ce)})})})})]}),(0,t.jsxs)(x.Z,{gutter:8,children:[(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})}),(0,t.jsx)(l.Z,{span:6,children:(0,t.jsx)(F.Z.Item,s()(s()({},B.Z.SWITCH_LAYOUT),{},{label:(0,t.jsx)(Y,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:G.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(M.Z,{})}))}),(0,t.jsx)(l.Z,{span:6,children:(0,t.jsx)(F.Z.Item,s()(s()({},B.Z.SWITCH_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:G.enable||!0,valuePropName:"checked",children:(0,t.jsx)(M.Z,{})}))})]}),(0,t.jsx)(F.Z.Item,s()(s()({},B.Z.SQL_LAYOUT),{},{label:(0,t.jsxs)(J.Z,{title:"\u5207\u6362\u5DE6\u4FA7\u83DC\u5355\u53EF\u8FDB\u5165SQL\u7F16\u8F91\u5668",children:["SQL\u8BED\u53E5 ",(0,t.jsx)(T.Z,{})]}),name:"sql",rules:[{required:!0,message:"\u8BF7\u586B\u5199SQL\u8BED\u53E5"}],initialValue:G.sql,children:(0,t.jsx)(Xe.Z,{language:"mysql",height:150,setEditor:re})}))]}))]})})]})})})},Ae=(0,H.connect)(function(Z){var h=Z.construct,R=Z.gconfig,ee=Z.loading;return{construct:h,gconfig:R,loading:ee}})(Ge),_e=e(97321),qe=e(48055),Ye=e(45360),Je=e(26855),yt=e(24315),ot=e(73505),vt=qe.Z.TabPane,Et=n.Z.Option,bt=function(h){var R=h.form,ee=h.dispatch,Te=h.construct,Ue=h.gconfig,We=h.suffix,ie=(0,a.useState)(null),Be=C()(ie,2),tt=Be[0],O=Be[1],d=(0,a.useState)(null),i=C()(d,2),j=i[0],re=i[1],G=Te.testCaseConstructorData,z=Te.constructorType,we=Ue.redisConfig,ue=Ue.envMap;(0,a.useEffect)(function(){ee({type:"gconfig/fetchRedisConfig"})},[]),(0,a.useEffect)(function(){R.resetFields(),R.setFieldsValue(G)},[G]);var X=function(){var ce=m()(u()().mark(function $e(pe){var De;return u()().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:if(!(!j||!pe)){fe.next=3;break}return Ye.ZP.info("\u8BF7\u9009\u62E9redis\u6216\u5B8C\u5584Redis\u547D\u4EE4"),fe.abrupt("return");case 3:return fe.next=5,ee({type:"gconfig/onlineRedisCommand",payload:{id:j,command:pe}});case 5:De=fe.sent,Je.Z.success({message:"\u6267\u884C\u5B8C\u6210",description:De});case 7:case"end":return fe.stop()}},$e)}));return function(pe){return ce.apply(this,arguments)}}();return(0,t.jsx)(x.Z,{gutter:8,children:(0,t.jsxs)(l.Z,{span:24,children:[(0,t.jsx)(ne,{suffix:We}),(0,t.jsx)(x.Z,{gutter:8,children:(0,t.jsx)(l.Z,{span:24,children:(0,t.jsxs)(F.Z,s()(s()({},B.Z.SUB_LAYOUT),{},{form:R,children:[(0,t.jsxs)(x.Z,{gutter:8,children:[(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Redis\u8BED\u53E5\u540D\u79F0"}],initialValue:G.name,children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u8F93\u5165Redis\u8BED\u53E5\u540D\u79F0"})})}),(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:(0,t.jsxs)(J.Z,{title:"\u6D4B\u8BD5\u7684\u65F6\u5019\u53EF\u4EE5\u9009\u4E2D\u5BF9\u5E94\u73AF\u5883\u7684redis\uFF0C\u5426\u5219\u53EF\u4EE5\u968F\u4FBF\u9009\u4E00\u4E2A\u540D\u79F0\u7B26\u5408\u7684redis",children:["Redis ",(0,t.jsx)(T.Z,{})]}),name:"redis",initialValue:G.redis,rules:[{required:!0,message:"\u8BF7\u9009\u62E9Redis\u8FDE\u63A5\u540D\u79F0, \u5982\u679C\u6CA1\u6709\u8BF7\u53BB\u3010Redis\u914D\u7F6E\u3011\u9875\u9762\u6DFB\u52A0"}],children:(0,t.jsx)(n.Z,{showSearch:!0,placeholder:"\u8BF7\u9009\u62E9Redis\u8FDE\u63A5\u540D\u79F0",onSelect:function($e,pe){re(pe.key)},children:we.map(function(ce){return(0,t.jsxs)(Et,{value:ce.name,children:[ce.name,"(",ue[ce.env],")"]},ce.id)})})})})]}),(0,t.jsxs)(x.Z,{gutter:8,children:[(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})}),(0,t.jsx)(l.Z,{span:6,children:(0,t.jsx)(F.Z.Item,s()(s()({},B.Z.SWITCH_LAYOUT),{},{label:(0,t.jsx)(Y,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:G.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(M.Z,{})}))}),(0,t.jsx)(l.Z,{span:6,children:(0,t.jsx)(F.Z.Item,s()(s()({},B.Z.SWITCH_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:G.enable||!0,valuePropName:"checked",children:(0,t.jsx)(M.Z,{})}))})]}),(0,t.jsx)(F.Z.Item,s()(s()({},B.Z.SQL_LAYOUT),{},{label:(0,t.jsxs)(J.Z,{title:"\u70B9\u51FB\u53EF\u6267\u884CRedis\u547D\u4EE4",children:["Redis\u547D\u4EE4",(0,t.jsx)(ot.Z,{twoToneColor:"#67C23A",onClick:m()(u()().mark(function ce(){return u()().wrap(function(pe){for(;;)switch(pe.prev=pe.next){case 0:return pe.next=2,X(R.getFieldValue("command"));case 2:case"end":return pe.stop()}},ce)})),style:{margin:"0 4px",fontSize:16,cursor:"pointer"}})]}),name:"command",colon:!1,rules:[{required:!0,message:"\u8BF7\u586B\u5199redis\u6267\u884C\u8BED\u53E5"}],initialValue:G.command,children:(0,t.jsx)(yt.Z,{language:"text",height:150,setEditor:O})}))]}))})})]})})},At=(0,H.connect)(function(Z){var h=Z.construct,R=Z.gconfig,ee=Z.loading;return{construct:h,gconfig:R,loading:ee}})(bt),it=e(53239),et=e(4007);function xt(Z){return(0,t.jsx)(yt.Z,s()(s()({},Z),{},{langugae:"python"}))}var S=function(h){var R=h.form,ee=h.dispatch,Te=h.construct,Ue=h.suffix,We=(0,a.useState)(null),ie=C()(We,2),Be=ie[0],tt=ie[1],O=Te.testCaseConstructorData;(0,a.useEffect)(function(){R.resetFields(),R.setFieldsValue(O)},[O]);var d=function(){var i=m()(u()().mark(function j(){var re,G,z;return u()().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:if(re=R.getFieldValue("command"),G=R.getFieldValue("value"),re){ue.next=5;break}return Ye.ZP.info("\u811A\u672C\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A"),ue.abrupt("return");case 5:return ue.next=7,ee({type:"testcase/onlinePyScript",payload:{value:G,command:re}});case 7:z=ue.sent,Je.Z.success({message:"\u6267\u884C\u5B8C\u6210",description:z});case 9:case"end":return ue.stop()}},j)}));return function(){return i.apply(this,arguments)}}();return(0,t.jsx)(x.Z,{gutter:8,children:(0,t.jsxs)(l.Z,{span:24,children:[(0,t.jsx)(ne,{suffix:Ue}),(0,t.jsxs)(F.Z,s()(s()({},B.Z.SUB_LAYOUT),{},{form:R,children:[(0,t.jsxs)(x.Z,{gutter:8,children:[(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165Python\u811A\u672C\u540D\u79F0"}],initialValue:O.name,children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u8F93\u5165Python\u811A\u672C\u540D\u79F0"})})}),(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})})]}),(0,t.jsxs)(x.Z,{gutter:8,children:[(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,s()(s()({},B.Z.SUB_LAYOUT),{},{label:(0,t.jsx)(Y,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:O.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(M.Z,{})}))}),(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,s()(s()({},B.Z.SUB_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:O.enable||!0,valuePropName:"checked",children:(0,t.jsx)(M.Z,{})}))})]}),(0,t.jsx)(F.Z.Item,s()(s()({label:(0,t.jsxs)(J.Z,{title:"\u70B9\u51FB\u53EF\u6D4B\u8BD5Python\u811A\u672C",children:["Python\u811A\u672C",(0,t.jsx)(ot.Z,{twoToneColor:"#67C23A",onClick:m()(u()().mark(function i(){return u()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,d(R.getFieldValue("command"));case 2:case"end":return re.stop()}},i)})),style:{margin:"0 4px",fontSize:16,cursor:"pointer"}})]}),name:"command",colon:!1},B.Z.SQL_LAYOUT),{},{initialValue:O.command,rules:[{required:!0,message:"\u8BF7\u8F93\u5165python\u4EE3\u7801"}],children:(0,t.jsx)(xt,{language:"python",height:180,setEditor:tt})}))]}))]})})},K=(0,H.connect)(function(Z){var h=Z.construct,R=Z.loading;return{construct:h,loading:R}})(S),b=e(4393),Q=e(15106),$=function(h){var R=h.form,ee=h.dispatch,Te=h.construct,Ue=h.suffix,We=h.headers,ie=h.setHeaders,Be=h.body,tt=h.setBody,O=h.bodyType,d=h.setBodyType,i=Te.testCaseConstructorData;return(0,a.useEffect)(function(){R.resetFields(),R.setFieldsValue(i),i.body_type&&d(i.body_type),i.headers&&ie(i.headers||[]),tt(i.body)},[i]),(0,t.jsx)(x.Z,{gutter:8,children:(0,t.jsxs)(l.Z,{span:24,children:[(0,t.jsx)(ne,{suffix:Ue}),(0,t.jsxs)(F.Z,s()(s()({},B.Z.SUB_LAYOUT),{},{form:R,children:[(0,t.jsxs)(x.Z,{gutter:8,children:[(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u540D\u79F0",name:"name",rules:[{required:!0,message:"\u8BF7\u8F93\u5165http\u8BF7\u6C42\u540D\u79F0"}],initialValue:i.name,children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u8F93\u5165http\u8BF7\u6C42\u540D\u79F0"})})}),(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,{label:"\u8FD4\u56DE\u503C",name:"value",children:(0,t.jsx)(Ve.Z,{placeholder:"\u8BF7\u586B\u5199\u9020\u6570\u540E\u7684\u8FD4\u56DE\u503C\uFF0C\u53EF\u4E0D\u586B"})})})]}),(0,t.jsxs)(x.Z,{gutter:8,children:[(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,s()(s()({},B.Z.SUB_LAYOUT),{},{label:(0,t.jsx)(Y,{}),rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u5171\u4EAB"}],initialValue:i.public||!0,valuePropName:"checked",name:"public",children:(0,t.jsx)(M.Z,{})}))}),(0,t.jsx)(l.Z,{span:12,children:(0,t.jsx)(F.Z.Item,s()(s()({},B.Z.SUB_LAYOUT),{},{label:"\u542F\u7528",name:"enable",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u662F\u5426\u542F\u7528"}],initialValue:i.enable||!0,valuePropName:"checked",children:(0,t.jsx)(M.Z,{})}))})]}),(0,t.jsx)(x.Z,{gutter:8,children:(0,t.jsx)(l.Z,{span:24,children:(0,t.jsx)(b.Z,{bordered:!0,children:(0,t.jsx)(Q.Z,{bodyType:O,setBodyType:d,form:R,caseInfo:{},body:Be,setBody:tt,headers:We,setHeaders:ie,save:!1})})})})]}))]})})},pt=(0,H.connect)(function(Z){var h=Z.construct,R=Z.loading;return{construct:h,loading:R}})($),le=e(59697),Bt=A.Z.Step,ct=function(h){var R=h.modal,ee=h.form,Te=h.setModal,Ue=h.caseId,We=h.dispatch,ie=h.construct,Be=h.testcase,tt=h.width,O=h.fetchData,d=h.record,i=h.suffix,j=i===void 0?!1:i,re=h.createMode,G=re===void 0?!1:re,z=ie.currentStep,we=ie.totalStep,ue=ie.constructorType,X=ie.testCaseConstructorData,ce=Be.preConstructor,$e=Be.postConstructor,pe=(0,a.useState)([]),De=C()(pe,2),k=De[0],fe=De[1],nt=(0,a.useState)(""),lt=C()(nt,2),gt=lt[0],Ke=lt[1],w=(0,a.useState)(0),me=C()(w,2),Oe=me[0],at=me[1],Se=function(ve){We({type:"construct/save",payload:ve})},Ie=function(ve){switch(X.type){case 0:return JSON.stringify({constructor_case_id:ve.constructor_case_id,params:ve.params});case 1:return JSON.stringify({database:ve.database,sql:ve.sql});case 2:return JSON.stringify({redis:ve.redis,command:ve.command});case 3:return JSON.stringify({command:ve.command});case 4:return JSON.stringify({body:gt,headers:le.Z.translateHeaders(k),base_path:ve.base_path,url:ve.url,request_method:ve.request_method,body_type:Oe})}},dt=function(){var ft=m()(u()().mark(function ve(){var Tt,Dt,Ft,st,f;return u()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,ee.validateFields();case 2:if(Tt=o.sent,Dt={value:Tt.value,type:X.type,name:Tt.name,constructor_json:Ie(Tt),enable:Tt.enable,case_id:Ue,public:Tt.public},G){o.next=17;break}if(!d.id){o.next=11;break}return o.next=8,We({type:"construct/update",payload:s()(s()({},Dt),{},{id:d.id,suffix:j})});case 8:Ft=o.sent,o.next=14;break;case 11:return o.next=13,We({type:"construct/insert",payload:s()(s()({},Dt),{},{suffix:j})});case 13:Ft=o.sent;case 14:Ft&&O(),o.next=20;break;case 17:f=V()(j?$e:ce),d.tempIndex===void 0?f.push(s()(s()({},Dt),{},{suffix:j,index:f.length})):f.splice(d.tempIndex,1,s()(s()({},Dt),{},{suffix:j})),We({type:"testcase/save",payload:(st={},g()(st,j?"postConstructor":"preConstructor",f),g()(st,"constructorModal",!1),st)});case 20:case"end":return o.stop()}},ve)}));return function(){return ft.apply(this,arguments)}}(),ze=function(ve){Se({constructorType:ve,testCaseConstructorData:{type:ve,public:!0,enable:!0},currentStep:z+1})},Ct=function(){if(z===0)return(0,t.jsxs)(x.Z,{gutter:[12,12],style:{marginTop:36},children:[(0,t.jsx)(l.Z,{span:8,children:(0,t.jsx)(_e.Z,{avatar:(0,t.jsx)(te.B,{type:"icon-yongliliebiao",style:{fontSize:32}}),title:"\u6D4B\u8BD5\u573A\u666F",description:"\u6D4B\u8BD5\u573A\u666F\u53EF\u4EE5\u590D\u7528, \u5E76\u4F20\u9012\u7528\u4F8B\u7684\u6570\u636E\u7ED9\u4E0B\u4E00\u4E2A\u573A\u666F",onClick:function(){return ze(0)}})}),(0,t.jsx)(l.Z,{span:8,children:(0,t.jsx)(_e.Z,{avatar:(0,t.jsx)(te.B,{type:"icon-mysql11",style:{fontSize:32}}),title:"SQL\u8BED\u53E5",description:"\u901A\u8FC7\u6267\u884CSQL\u8BED\u53E5\uFF0C\u53EF\u4EE5\u9020\u51FA/\u6062\u590D\u7528\u4F8B\u573A\u666F\u9700\u8981\u7684\u6570\u636E",onClick:function(){return ze(1)}})}),(0,t.jsx)(l.Z,{span:8,children:(0,t.jsx)(_e.Z,{avatar:(0,t.jsx)(te.B,{type:"icon-redis2",style:{fontSize:32}}),title:"Redis\u64CD\u4F5C",description:"\u901A\u8FC7\u64CD\u4F5CRedis\uFF0C\u53EF\u4EE5\u83B7\u53D6\u6216\u8005\u6821\u9A8C\u7F13\u5B58\u4E2D\u7684\u6570\u636E",onClick:function(){return ze(2)}})}),(0,t.jsx)(l.Z,{span:8,children:(0,t.jsx)(_e.Z,{avatar:(0,t.jsx)(te.B,{type:"icon-python",style:{fontSize:32}}),title:"Python\u65B9\u6CD5",description:"\u9700\u8981\u81EA\u5B9A\u4E49\u9020\u6570\u65B9\u6CD5\u7684\uFF0C\u53EF\u4EE5\u4F7F\u7528Python\u7F16\u5199\u5BF9\u5E94\u7684\u6838\u5FC3\u65B9\u6CD5",onClick:function(){return ze(3)}})}),(0,t.jsx)(l.Z,{span:8,children:(0,t.jsx)(_e.Z,{avatar:(0,t.jsx)(te.B,{type:"icon-qingqiu",style:{fontSize:32}}),title:"HTTP\u8BF7\u6C42",description:"\u4F9D\u8D56\u4E8E\u7B2C\u4E09\u65B9\u7684\u63A5\u53E3\uFF0C\u63A8\u8350\u4F7F\u7528HTTP\u8BF7\u6C42\uFF0C\u5982\u901A\u8FC7\u767E\u5EA6api\u8BC6\u522B\u5BF9\u5E94\u56FE\u7247\u9A8C\u8BC1\u7801",onClick:function(){return ze(4)}})})]});if(z===1){if(ue===0)return(0,t.jsx)(q,{form:ee,suffix:j});if(ue===1)return(0,t.jsx)(Ae,{form:ee,suffix:j});if(ue===2)return(0,t.jsx)(At,{form:ee,suffix:j});if(ue===3)return(0,t.jsx)(K,{form:ee,suffix:j});if(ue===4)return(0,t.jsx)(pt,{suffix:j,form:ee,headers:k,bodyType:Oe,setBodyType:at,setHeaders:fe,body:gt,setBody:Ke})}},Pe=function(){Se({currentStep:z-1})};return(0,t.jsx)(Re.Z,{title:j?"\u540E\u7F6E\u6B65\u9AA4":"\u524D\u7F6E\u6B65\u9AA4",width:tt||800,open:R,onClose:function(){return Te(!1)},footer:null,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(x.Z,{children:[(0,t.jsx)(l.Z,{span:6}),(0,t.jsx)(l.Z,{span:12,children:(0,t.jsxs)(A.Z,{current:z,size:"small",children:[(0,t.jsx)(Bt,{title:"\u9009\u62E9\u7C7B\u578B"},"type"),(0,t.jsx)(Bt,{title:"\u6784\u9020\u6570\u636E"},"type")]})}),(0,t.jsx)(l.Z,{span:6})]}),Ct(),(0,t.jsxs)("div",{style:{marginTop:24,textAlign:"center"},children:[z===we&&(0,t.jsxs)(I.ZP,{type:"primary",onClick:dt,children:[(0,t.jsx)(he.Z,{})," \u5B8C\u6210"]}),z>0&&(0,t.jsxs)(I.ZP,{style:{margin:"0 8px"},onClick:function(){return Pe()},children:[(0,t.jsx)(te.B,{type:"icon-shangyibu1"})," \u4E0A\u4E00\u6B65"]})]})]})})},Ee=(0,H.connect)(function(Z){var h=Z.construct,R=Z.testcase,ee=Z.loading;return{construct:h,loading:ee,testcase:R}})(ct)},44046:function(Zt,Fe,e){e.d(Fe,{Z:function(){return tt}});var xe=e(97857),u=e.n(xe),se=e(19632),g=e.n(se),P=e(9783),V=e.n(P),je=e(15009),s=e.n(je),W=e(99289),m=e.n(W),L=e(5574),C=e.n(L),A=e(37594),x=e(44413),l=e(22763),Re=e(7624),I=e(67294),H=e(4393),te=e(90596),a=e(15106),n=e(85893),J=function(d){return(0,n.jsx)(H.Z,{bordered:d.bordered,children:(0,n.jsx)(a.Z,u()({},d))})},M=(0,te.connect)(function(O){var d=O.gconfig;return{gconfig:d}})(J),ut=e(65245),F=e(96074),Ne=e(85576),t=e(71230),ye=e(15746),be=e(71577),B=e(64997),Ze=e(11475),de=e(51042),Le=e(84298),ge=e(20659),p=e(10981),E=e(19478),ne=function(d){var i=d.dispatch,j=d.testcase,re=d.caseId,G=d.createMode,z=(0,I.useState)(!1),we=C()(z,2),ue=we[0],X=we[1],ce=(0,I.useState)({}),$e=C()(ce,2),pe=$e[0],De=$e[1],k=j.asserts,fe=function(){var Ke=m()(s()().mark(function w(me){var Oe;return s()().wrap(function(Se){for(;;)switch(Se.prev=Se.next){case 0:return Se.next=2,i({type:"testcase/deleteTestCaseAsserts",payload:{id:me.id}});case 2:Oe=Se.sent,Oe&&i({type:"testcase/save",payload:{asserts:k.filter(function(Ie){return Ie.id!==me.id})}});case 4:case"end":return Se.stop()}},w)}));return function(me){return Ke.apply(this,arguments)}}(),nt=function(w){var me=g()(k);me.splice(w.index,1),i({type:"testcase/save",payload:{asserts:me}})},lt=[{title:"#",key:"index",render:function(w,me,Oe){return Oe+1}},{title:"\u6821\u9A8C\u5185\u5BB9",key:"name",dataIndex:"name"},{title:"\u7C7B\u578B",key:"assert_type",dataIndex:"assert_type",render:function(w){return E.Z.ASSERT_TYPE[w]}},{title:"\u9884\u671F\u7ED3\u679C",key:"expected",dataIndex:"expected",ellipse:!0},{title:"\u5B9E\u9645\u7ED3\u679C",key:"actually",dataIndex:"actually",ellipse:!0},{title:"\u64CD\u4F5C",key:"ops",render:function(w,me,Oe){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{onClick:function(){X(!0),De(u()(u()({},me),{},{index:Oe}))},children:"\u7F16\u8F91"}),(0,n.jsx)(F.Z,{type:"vertical"}),(0,n.jsx)("a",{onClick:function(){Ne.Z.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u65AD\u8A00\u6570\u636E\u5417?",icon:(0,n.jsx)(Ze.Z,{}),content:"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E~",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u70B9\u9519\u4E86",onOk:function(){var Se=m()(s()().mark(function dt(){return s()().wrap(function(Ct){for(;;)switch(Ct.prev=Ct.next){case 0:if(!G){Ct.next=4;break}nt(u()(u()({},me),{},{index:Oe})),Ct.next=6;break;case 4:return Ct.next=6,fe(me);case 6:case"end":return Ct.stop()}},dt)}));function Ie(){return Se.apply(this,arguments)}return Ie}()})},children:"\u5220\u9664"})]})}}],gt=function(){var Ke=m()(s()().mark(function w(me){var Oe,at,Se,Ie,dt,ze;return s()().wrap(function(Pe){for(;;)switch(Pe.prev=Pe.next){case 0:if(Oe=u()({case_id:re},me),!G){Pe.next=8;break}return pe.index!==void 0?(Se=g()(k),Se.splice(pe.index,1,u()({},Oe))):Se=[].concat(g()(k),[u()({},Oe)]),Pe.next=5,i({type:"testcase/save",payload:{asserts:Se}});case 5:X(!1),Pe.next=29;break;case 8:if(!pe.id){Pe.next=22;break}return Pe.next=11,i({type:"testcase/updateTestCaseAsserts",payload:u()(u()({},Oe),{},{id:pe.id})});case 11:if(at=Pe.sent,!p.Z.response(at,!0)){Pe.next=20;break}return X(!1),Ie=g()(k),dt=Ie.findIndex(function(ft){return pe.id===ft.id}),ze=Ie[dt],Ie.splice(dt,1,u()(u()({},ze),at.data)),Pe.next=20,i({type:"testcase/save",payload:{asserts:Ie}});case 20:Pe.next=29;break;case 22:return Pe.next=24,i({type:"testcase/insertTestCaseAsserts",payload:Oe});case 24:if(at=Pe.sent,!p.Z.response(at,!0)){Pe.next=29;break}return X(!1),Pe.next=29,i({type:"testcase/save",payload:{asserts:[].concat(g()(k),[at.data])}});case 29:case"end":return Pe.stop()}},w)}));return function(me){return Ke.apply(this,arguments)}}();return(0,n.jsx)(t.Z,{gutter:8,children:(0,n.jsxs)(ye.Z,{span:24,children:[(0,n.jsx)(Le.Z,{open:ue,fields:ge.Z.CaseAsserts,title:"\u7528\u4F8B\u65AD\u8A00",left:6,right:18,onFinish:gt,onCancel:function(){return X(!1)},record:pe}),(0,n.jsx)(t.Z,{style:{marginBottom:16},children:(0,n.jsx)(ye.Z,{span:8,children:(0,n.jsxs)(be.ZP,{type:"primary",onClick:function(){X(!0),De({})},children:[(0,n.jsx)(de.Z,{}),"\u6DFB\u52A0\u65AD\u8A00"]})})}),(0,n.jsx)(B.Z,{columns:lt,dataSource:k,rowKey:function(w){return w.id},locale:{emptyText:(0,n.jsx)(l.Z,{height:150})}})]})})},r=(0,te.connect)(function(O){var d=O.testcase,i=O.loading;return{testcase:d,loading:i}})(ne),q=e(38925),he=e(26194),ae=function(d){var i=d.caseId,j=d.testcase,re=d.loading,G=d.dispatch,z=d.currentEnv,we=d.createMode,ue=we===void 0?!1:we,X=j.testData,ce=(0,I.useState)({current:1,total:0,pageSize:5}),$e=C()(ce,2),pe=$e[0],De=$e[1],k=(0,I.useState)([]),fe=C()(k,2),nt=fe[0],lt=fe[1],gt=(0,I.useState)({}),Ke=C()(gt,2),w=Ke[0],me=Ke[1],Oe=(0,I.useState)(!1),at=C()(Oe,2),Se=at[0],Ie=at[1],dt=(0,I.useState)(null),ze=C()(dt,2),Ct=ze[0],Pe=ze[1];(0,I.useEffect)(function(){var f=parseInt(z,10),c=X[f];c?(lt(g()(c)),De(u()(u()({},pe),{},{current:1,total:c.length}))):(lt([]),De(u()(u()({},pe),{},{current:1,total:0})))},[z,X]);var ft=function(){var f=m()(s()().mark(function c(o){var D,_;return s()().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:return D=u()({},X),_=D[parseInt(z,10)],D[parseInt(z,10)]=_.filter(function(jt){return o.name!==jt.name}),ke.next=5,G({type:"testcase/save",payload:{testData:D}});case 5:case"end":return ke.stop()}},c)}));return function(o){return f.apply(this,arguments)}}(),ve=function(){var f=m()(s()().mark(function c(o){var D,_,oe;return s()().wrap(function(jt){for(;;)switch(jt.prev=jt.next){case 0:return jt.next=2,G({type:"testcase/deleteTestcaseData",payload:{id:o}});case 2:if(D=jt.sent,!D){jt.next=9;break}return _=u()({},X),oe=_[parseInt(z,10)],_[parseInt(z,10)]=oe.filter(function(Ot){return Ot.id!==o}),jt.next=9,G({type:"testcase/save",payload:{testData:_}});case 9:case"end":return jt.stop()}},c)}));return function(o){return f.apply(this,arguments)}}(),Tt=[{title:"#",dataIndex:"id",key:"id"},{title:"\u573A\u666F\u540D\u79F0",dataIndex:"name",key:"name"},{title:"\u6D4B\u8BD5\u6570\u636E",dataIndex:"json_data",key:"json_data",ellipse:!0},{title:"\u64CD\u4F5C",key:"ops",render:function(c,o,D){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{onClick:function(){me(u()(u()({},o),{},{index:D})),Ie(!0)},children:"\u7F16\u8F91"}),(0,n.jsx)(F.Z,{type:"vertical"}),(0,n.jsx)("a",{onClick:function(){Ne.Z.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u6761\u6D4B\u8BD5\u6570\u636E\u5417?",icon:(0,n.jsx)(Ze.Z,{}),content:"\u5220\u9664\u540E\u4E0D\u53EF\u6062\u590D\uFF0C\u8BF7\u8C28\u614E~",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u70B9\u9519\u4E86",onOk:function(){var oe=m()(s()().mark(function jt(){return s()().wrap(function(St){for(;;)switch(St.prev=St.next){case 0:if(!ue){St.next=5;break}return St.next=3,ft(o);case 3:St.next=7;break;case 5:return St.next=7,ve(o.id);case 7:case"end":return St.stop()}},jt)}));function ke(){return oe.apply(this,arguments)}return ke}()})},children:"\u5220\u9664"})]})}}],Dt=function(){var f=m()(s()().mark(function c(o){var D,_;return s()().wrap(function(ke){for(;;)switch(ke.prev=ke.next){case 0:D=u()({},X),_=u()({env:z},o),w.index!==void 0?D[parseInt(z,10)].splice(w.index,1,_):D[parseInt(z,10)]===void 0?D[parseInt(z,10)]=[_]:D[parseInt(z,10)].push(_),G({type:"testcase/save",payload:{testData:D}}),Ie(!1);case 5:case"end":return ke.stop()}},c)}));return function(o){return f.apply(this,arguments)}}(),Ft=function(){var f=m()(s()().mark(function c(o){var D;return s()().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:if(w.id){oe.next=6;break}return oe.next=3,G({type:"testcase/insertTestcaseData",payload:u()({case_id:i,env:z},o)});case 3:D=oe.sent,oe.next=9;break;case 6:return oe.next=8,G({type:"testcase/updateTestcaseData",payload:u()({id:w.id,case_id:i,env:z},o)});case 8:D=oe.sent;case 9:D&&Ie(!1);case 10:case"end":return oe.stop()}},c)}));return function(o){return f.apply(this,arguments)}}(),st=[{name:"name",label:"\u6D4B\u8BD5\u573A\u666F",required:!0,type:"input",placeholder:"\u8BF7\u8F93\u5165\u6D4B\u8BD5\u573A\u666F",initialValue:w.name},{name:"json_data",label:"JSON\u6570\u636E",required:!0,placeholder:"\u8BF7\u8F93\u5165\u6D4B\u8BD5\u573A\u666F",initialValue:w.name,component:(0,n.jsx)(he.Z,{height:200,setEditor:Pe,theme:"material-one-dark"})}];return(0,n.jsxs)(t.Z,{gutter:8,children:[(0,n.jsx)(Le.Z,{title:"\u6D4B\u8BD5\u6570\u636E",record:w,onCancel:function(){Ie(!1)},left:4,right:20,width:650,open:Se,onFinish:ue?Dt:Ft,fields:st,children:(0,n.jsx)(q.Z,{closable:!0,type:"info",style:{marginBottom:12},message:"\u6570\u636E\u7BA1\u7406\u63A5\u53D7\u4E00\u4E32key-value\u7684\u6570\u636E\uFF0C\u4F9B\u5927\u5BB6\u5728case\u91CC\u9762\u4F7F\u7528\u8FD9\u4E9B\u53D8\u91CF\uFF0C\u7528${\u53D8\u91CF}\u7684\u65B9\u5F0F\u3002",showIcon:!0})}),(0,n.jsx)(ye.Z,{span:24,children:(0,n.jsxs)(H.Z,{bordered:!1,children:[(0,n.jsx)(t.Z,{gutter:8,children:(0,n.jsx)(ye.Z,{span:6,children:(0,n.jsxs)(be.ZP,{type:"primary",onClick:function(){Ie(!0),me({})},children:[(0,n.jsx)(de.Z,{})," \u6DFB\u52A0\u6570\u636E"]})})}),(0,n.jsx)(t.Z,{gutter:8,style:{marginTop:12},children:(0,n.jsx)(ye.Z,{span:24,children:(0,n.jsx)(B.Z,{columns:Tt,pagination:pe,rowKey:function(c){return c.id},loading:re.effects["testcase/insertTestcaseData"]||re.effects["testcase/updateTestcaseData"]||re.effects["testcase/deleteTestcaseData"],dataSource:nt,locale:{emptyText:(0,n.jsx)(l.Z,{height:"150"})},onChange:function(c){return De(u()(u()({},pe),{},{current:c.current}))}})})})]})})]})},Ve=(0,te.connect)(function(O){var d=O.testcase,i=O.loading;return{testcase:d,loading:i}})(ae),Qe=e(13769),Xe=e.n(Qe),T=e(34041),Y=e(52445),He=e(96365),Ge=e(86738),Ae=e(31484),_e=["index"],qe=["title","editable","children","dataIndex","name","record","handleSave","toggleEdit"],Ye=T.Z.Option,Je=I.createContext(null),yt=function(d){var i=d.index,j=Xe()(d,_e),re=Y.Z.useForm(),G=C()(re,1),z=G[0];return(0,n.jsx)(Y.Z,{form:z,component:!1,children:(0,n.jsx)(Je.Provider,{value:z,children:(0,n.jsx)("tr",u()({},j))})})},ot=function(O){var d=O.columns,i=O.dataSource,j=O.setDataSource,re=(0,I.useState)(null),G=C()(re,2),z=G[0],we=G[1],ue=function(k){var fe=k.title,nt=k.editable,lt=k.children,gt=k.dataIndex,Ke=k.name,w=k.record,me=k.handleSave,Oe=k.toggleEdit,at=Xe()(k,qe),Se=(0,I.useContext)(Je),Ie=(0,I.useRef)(null),dt=(0,I.useState)({}),ze=C()(dt,2),Ct=ze[0],Pe=ze[1];(0,I.useEffect)(function(){z!=null&&Se.setFieldsValue(i[z])},[z]);var ft=function(st,f,c){var o=g()(i),D=o.findIndex(function(oe){return st.key===oe.key}),_=o[D];o[D]=u()(u()({},_),{},V()({},f,c)),j(o)},ve=function(st,f,c,o,D){return f==="source"?(0,n.jsx)(Y.Z.Item,{style:{margin:0},name:f,rules:[{required:!0,message:"".concat(st," is required.")}],children:(0,n.jsxs)(T.Z,{placeholder:"\u9009\u62E9\u6570\u636E\u6765\u6E90",style:{width:"90%"},ref:o,onSelect:function(oe){ft(c,f,oe)},onBlur:D,children:[(0,n.jsx)(Ye,{value:0,children:"Response: \u6B63\u5219"}),(0,n.jsx)(Ye,{value:1,children:"Response: JSONPath"}),(0,n.jsx)(Ye,{value:2,children:"Header: K/V"}),(0,n.jsx)(Ye,{value:3,children:"Cookie: K/V"}),(0,n.jsx)(Ye,{value:4,children:"\u54CD\u5E94\u72B6\u6001\u7801"}),(0,n.jsx)(Ye,{value:5,children:"Body: \u6B63\u5219"}),(0,n.jsx)(Ye,{value:6,children:"Body: JSONPath"}),(0,n.jsx)(Ye,{value:7,children:"Request Header: K/V"})]})}):f==="expression"?(0,n.jsx)(Y.Z.Item,{style:{margin:0},name:f,rules:[{required:c.source!==4,message:"".concat(st," is required.")}],children:(0,n.jsx)(He.Z,{ref:o,onPressEnter:D,disabled:c.source===4,onBlur:D,placeholder:c.source===4?"\u65E0\u9700\u586B\u5199":"\u8BF7\u8F93\u5165\u8868\u8FBE\u5F0F"})}):f==="match_index"?(0,n.jsx)(Y.Z.Item,{style:{margin:0},name:f,rules:[{required:[4,1,6,2,3,7].indexOf(c.source)===-1,message:"".concat(st," is required.")}],children:(0,n.jsx)(He.Z,{ref:o,onPressEnter:D,disabled:[4,1,6,2,3,7].indexOf(c.source)>-1,onBlur:D,placeholder:c.source===4?"\u65E0\u9700\u586B\u5199":"\u8BF7\u8F93\u5165\u5339\u914D\u9879"})}):(0,n.jsx)(Y.Z.Item,{style:{margin:0},name:f,rules:[{required:c.source!==4,message:"".concat(st," is required.")}],children:(0,n.jsx)(He.Z,{ref:o,onPressEnter:D,onBlur:D,placeholder:"\u8BF7\u8F93\u5165".concat(st)})})},Tt=function(){var Ft=m()(s()().mark(function st(){var f;return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,Se.validateFields();case 3:f=o.sent,we(null),Se.setFieldsValue(w),me(u()(u()({},w),f)),o.next=12;break;case 9:o.prev=9,o.t0=o.catch(0),console.log("Save failed:",o.t0);case 12:case"end":return o.stop()}},st,null,[[0,9]])}));return function(){return Ft.apply(this,arguments)}}(),Dt=lt;return nt&&(Dt=z===w.key?ve(Ke,gt,w,Ie,Tt):(0,n.jsx)("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},children:lt})),(0,n.jsx)("td",u()(u()({},at),{},{children:Dt}))},X=function(k){var fe=g()(i),nt=fe.findIndex(function(gt){return k.key===gt.key}),lt=fe[nt];fe.splice(nt,1,u()(u()({},lt),k)),fe.filter(function(gt){return gt.name}).length===fe.length&&fe.push({key:i.length===0?0:i[i.length-1].key+1,source:1}),j(fe)},ce=function(k){var fe=g()(i);j(fe.filter(function(nt){return nt.key!==k}).map(function(nt,lt){return u()(u()({},nt),{},{key:lt})}))},$e=d.map(function(De){return De.editable?u()(u()({},De),{},{onCell:function(fe){return{record:fe,editable:De.editable,dataIndex:De.dataIndex,title:De.title,name:De.name,handleSave:X}}}):De});$e=[].concat(g()($e),[{title:"\u64CD\u4F5C",render:function(k,fe){return i.length>1?(0,n.jsx)(Ge.Z,{title:"\u786E\u5B9A\u5220\u9664\u5417?",onConfirm:function(){ce(fe.key)},children:(0,n.jsx)(Ae.Z,{twoToneColor:"red",onClick:function(lt){lt.stopPropagation()}})}):null}}]);var pe={body:{row:yt,cell:ue}};return(0,n.jsx)(B.Z,{onRow:function(k){return{onClick:function(nt){we(k.key)}}},components:pe,rowClassName:"editable-row",dataSource:i,columns:$e,pagination:!1})},vt=e(63783),Et={JSONPATH_TITLE:`JSON\u683C\u5F0F\u7684\u89E3\u6790\u540C\u6837\u652F\u6301\u6570\u7EC4\u4E2D\u6307\u5B9A\u5BF9\u8C61\uFF0C\u5982data.itemlist[0]\uFF1B\u652F\u6301\u63D0\u53D6\u6570\u636E\u4E2D\u968F\u673A\u503Cdata.itemlist[random]\uFF1B\u540C\u65F6\u652F\u6301\u63D0\u53D6\u90E8\u5206\u503C\u7EC4\u5408\u4E3A\u65B0\u6570\u7EC4\uFF0Cdata.itemlist[0-99].id\u5BFC\u51FA\u524D100\u4E2Aid\uFF0Cdata.itemlist[all].id\u5373\u5BFC\u51FA\u5168\u90E8id\u3002\u82E5\u60F3\u5C06\u6570\u7EC4\u5185\u7684\u503C\u8FDB\u884C\u904D\u5386\u4F7F\u7528\uFF0C\u8BF7\u7ED3\u5408\u6570\u636E\u5BFC\u51FA\u8282\u70B9\u914D\u5408\u4F7F\u7528\u3002\u6B63\u5219\u8868\u8FBE\u5F0F\u53EF\u6307\u5B9A\u5339\u914D\u9879.
                    \u5E38\u89C1\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\u4F7F\u7528\u5230\u7684\u5B57\u7B26\u8303\u56F4\u793A\u4F8B\u5982\u4E0B:
                    \u82F1\u6587\u5B57\u6BCD:[a-zA-Z]
                    \u6570\u5B57:[0-9]
                    \u4E2D\u6587\u5B57\u7B26\u8303\u56F4:[\u4E00-\u9FA5]
                    \u4E2D\u6587\u3001\u82F1\u6587\u3001\u6570\u5B57\uFF1A[\u4E00-\u9FA5a-zA-Z0-9]
                    \u6307\u5B9A\u7B26\u5408\u6761\u4EF6\u7684\u5B57\u7B26\u4E2A\u6570\uFF1A[a-zA-Z]{2,4} \u8868\u793A2-4\u4E2A\u5B57\u7B26\uFF1B{2}\u8868\u793A\u5B57\u7B26\u4E2A\u6570\u4E3A2\u4E2A\u3002
                    \u6CE8\u610F\uFF1A\u5C3D\u91CF\u4E0D\u8981\u4F7F\u7528*,\u5426\u52190\u4E2A\u4E5F\u4F1A\u5339\u914D\u5230`},bt={0:"Response: \u6B63\u5219",1:"Response: JSONPath",2:"Header: K/V",3:"Cookie: K/V",4:"\u54CD\u5E94\u72B6\u6001\u7801",5:"Body: \u6B63\u5219",6:"Body: JSONPath",7:"Request Header: K/V"},At=function(O){var d=O.dispatch,i=O.testcase,j=O.caseId,re=O.createMode,G=i.outParameters,z=function(X){d({type:"testcase/save",payload:{outParameters:X}})},we=[{title:"\u51FA\u53C2\u540D",dataIndex:"name",key:"name",name:"\u51FA\u53C2\u540D",width:"20%",editable:!0,render:function(X){return X||"\u8BF7\u8F93\u5165\u51FA\u53C2\u540D"}},{title:"\u6765\u6E90",name:"\u6765\u6E90",dataIndex:"source",key:"source",width:"25%",editable:!0,render:function(X){return X!==void 0?bt[X]:"\u8BF7\u9009\u62E9\u6765\u6E90"}},{name:"\u89E3\u6790\u8868\u8FBE\u5F0F",title:(0,n.jsxs)("span",{children:["\u89E3\u6790\u8868\u8FBE\u5F0F ",(0,n.jsx)(x.Z,{icon:(0,n.jsx)(vt.Z,{}),title:Et.JSONPATH_TITLE})]}),dataIndex:"expression",key:"expression",editable:!0,render:function(X,ce){return ce.source!==4?X||"\u8BF7\u8F93\u5165\u89E3\u6790\u8868\u8FBE\u5F0F":"\u65E0\u9700\u586B\u5199"}},{title:"\u7B2C\u51E0\u4E2A\u5339\u914D\u9879",name:"\u7B2C\u51E0\u4E2A\u5339\u914D\u9879",dataIndex:"match_index",editable:!0,render:function(X,ce){return ce.source!==4&&ce.source!==1&&ce.source!==6?X||"\u8BF7\u8F93\u5165\u5339\u914D\u9879":"\u65E0\u9700\u586B\u5199"}}];return(0,n.jsx)(ot,{columns:we,dataSource:G,setDataSource:z})},it=e(48055),et=e(96021),xt=it.Z.TabPane,S=function(d){var i=d.open,j=d.gconfig,re=d.variables,G=d.onCancel,z=[{title:"\u53D8\u91CF\u540D",dataIndex:"name",key:"name",render:function(X){return(0,n.jsx)(et.Z.Text,{copyable:!0,children:X})}}],we=[].concat(z,[{title:"\u6765\u6E90",dataIndex:"stepName",key:"stepName"}]);return(0,n.jsx)(Ne.Z,{title:"\u53D8\u91CF\u5217\u8868",open:i,width:500,footer:null,onCancel:G,children:(0,n.jsxs)(it.Z,{children:[(0,n.jsx)(xt,{tab:"\u5168\u5C40\u53D8\u91CF",children:(0,n.jsx)(B.Z,{columns:z,dataSource:j,size:"small"})},"global"),(0,n.jsx)(xt,{tab:"\u7528\u4F8B\u53D8\u91CF",children:(0,n.jsx)(B.Z,{columns:we,dataSource:re,size:"small"})},"case")]})})},K=S,b=e(89609),Q=e(4713),$=e(59697),pt=e(65987),le=e(34804),Bt=e(17811),ct=e(45360),Ee=e(32545),Z=e(51904),h=e(72269),R=e(11390),ee=e(85418),Te=e(42075),Ue=e(12845),We=e(53575),ie=it.Z.TabPane,Be=function(d){var i=d.dispatch,j=d.testcase,re=d.case_id,G=d.setSuffix,z=d.body,we=d.setBody,ue=d.formData,X=d.setFormData,ce=d.gconfig,$e=d.onSubmit,pe=d.form,De=d.createMode,k=De===void 0?!1:De,fe=d.headers,nt=d.setHeaders,lt=d.bodyType,gt=d.setBodyType,Ke=d.loading,w=j.preConstructor,me=j.postConstructor,Oe=j.activeKey,at=j.constructors_case,Se=j.envActiveKey,Ie=j.asserts,dt=j.caseInfo,ze=ce.envList,Ct=(0,I.useState)(!1),Pe=C()(Ct,2),ft=Pe[0],ve=Pe[1],Tt=(0,I.useState)([]),Dt=C()(Tt,2),Ft=Dt[0],st=Dt[1],f=(0,I.useState)([]),c=C()(f,2),o=c[0],D=c[1],_=(0,I.useState)(localStorage.getItem("case_study")===null),oe=C()(_,2),ke=oe[0],jt=oe[1],Ot=(0,I.useState)(null),St=C()(Ot,2),Lt=St[0],Ut=St[1],It=(0,I.useRef)(null),Kt=(0,I.useRef)(null),Nt=(0,I.useRef)(null),Vt=(0,I.useRef)(null),Ht=(0,I.useRef)(null),Jt=(0,I.useRef)(null),Gt=ze.map(function(y){return{key:y.id,label:(0,n.jsx)("a",{onClick:function(){Ut(y.name),ct.ZP.success("\u6D4B\u8BD5\u73AF\u5883\u5DF2\u5207\u6362\u81F3"+y.name)},children:y.name})}}),Yt=function(){var y=m()(s()().mark(function v(U){var Ce,N;return s()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:return Ce=U.map(function(mt){return{case_id:mt.case_id,step_name:mt.name}}),Me.next=3,(0,Q.Sb)(Ce);case 3:N=Me.sent,p.Z.response(N)&&D(Object.keys(N.data).map(function(mt){return N.data[mt]}));case 5:case"end":return Me.stop()}},v)}));return function(U){return y.apply(this,arguments)}}(),wt=[{title:"\u6570\u636E\u7BA1\u7406",placement:"right",description:"\u6570\u636E\u7BA1\u7406\u6A21\u5757\uFF0C\u4EE5\u6570\u636E\u9A71\u52A8\u7684\u65B9\u5F0F\u6279\u91CF\u8BF7\u6C42\u63A5\u53E3\uFF0C\u89E3\u51B3\u91CD\u590D\u7F16\u5199\u573A\u666F\u7684\u70E6\u607C~\u{1F47B}",cover:(0,n.jsx)(Ee.Z,{width:"100%",style:{height:200},src:"/data_driven.jpeg"}),target:function(){return It.current}},{title:"\u524D\u7F6E\u6B65\u9AA4",placement:"right",description:"\u5728\u524D\u7F6E\u6B65\u9AA4\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u6784\u9020\u4E00\u5207\u4F60\u9700\u8981\u7684\u6570\u636E\uFF0C\u5305\u62EC\u4F46\u4E0D\u9650\u4E8EDB/Redis\u7B49\uFF0C\u5E76\u80FD\u5C06\u6570\u636E\u4F20\u9012\u4E0B\u53BB\u{1F440}",cover:(0,n.jsx)(Ee.Z,{width:"100%",style:{height:200},src:"/pre.svg"}),target:function(){return Kt.current}},{title:"\u63A5\u53E3\u8BF7\u6C42",placement:"right",description:"\u5728\u63A5\u53E3\u8BF7\u6C42\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u6784\u5EFAHTTP/DUBBO/GRPC\u8FD93\u7C7B\u8BF7\u6C42\uFF0C\u5982\u679C\u9047\u5230\u6709\u53D8\u91CF\u9700\u8981\u586B\u5199\uFF0C\u53EF\u4EE5\u6309\u4E0B\u5FEB\u6377\u952E\u300E$\u300F\u5F39\u51FA\u53D8\u91CF\u83DC\u5355\u54E6~\u{1F42C}",cover:(0,n.jsx)(Ee.Z,{width:"100%",style:{height:200},src:"/api.svg"}),target:function(){return Vt.current}},{title:"\u51FA\u53C2\u63D0\u53D6",placement:"left",description:"\u5728\u51FA\u53C2\u63D0\u53D6\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u63D0\u53D6\u4F60\u5728\u4E0B\u4E00\u4E2A\u6B65\u9AA4\u4E2D\u9700\u8981\u7684\u6570\u636E, \u6BD4\u5982\u4F60\u53EF\u4EE5\u63D0\u53D6\u767B\u5F55\u540E\u7684token\uFF0C\u7528\u4E8E\u63A5\u4E0B\u6765\u7684\u64CD\u4F5C\uFF01\u51FA\u53C2\u63D0\u53D6\u4E3B\u8981\u652F\u6301\u6B63\u5219\u548CJSONPath2\u79CD\u65B9\u5F0F\uFF0C\u5982\u679C\u8FD8\u4E0D\u719F\u6089\u7684\u8BDD\uFF0C\u5EFA\u8BAE\u53BB\u641C\u7D22\u5B66\u4E60\u4E00\u4E0B\u54E6~\u{1F47D}",cover:(0,n.jsx)(Ee.Z,{width:"100%",style:{height:200},src:"/out.svg"}),target:function(){return Jt.current}},{title:"\u65AD\u8A00",placement:"left",description:"\u5728\u65AD\u8A00\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u5BF9\u4F60\u672C\u6B21\u6D4B\u8BD5\u7684\u6570\u636E\u8FDB\u884C\u6821\u9A8C\uFF0C\u4EE5\u4FBF\u4E8E\u540E\u7EED\u573A\u666F\u81EA\u52A8\u6267\u884C\u65F6\u80FD\u68C0\u6D4B\u51FA\u5F02\u5E38\uFF0C\u65AD\u8A00\u5F88\u91CD\u8981\uFF0C\u8BB0\u5F97\u8981\u586B\u54E6\uFF01\u{1F383}",cover:(0,n.jsx)(Ee.Z,{width:"100%",style:{height:200},src:"/assert.svg"}),target:function(){return Ht.current}},{title:"\u540E\u7F6E\u6B65\u9AA4",placement:"left",description:"\u5728\u540E\u7F6E\u6B65\u9AA4\u4E2D\uFF0C\u4F60\u53EF\u4EE5\u505A\u4E00\u4E9B\u6E05\u7406\u5DE5\u4F5C\uFF0C\u6BD4\u5982\u5220\u9664\u4F60\u521B\u5EFA\u7684\u6570\u636E\u7B49\uFF0C\u7528\u6CD5\u4E0E\u524D\u7F6E\u6B65\u9AA4\u7C7B\u4F3C~\u{1F680}",cover:(0,n.jsx)(Ee.Z,{width:"100%",style:{height:200},src:"/clean.svg"}),target:function(){return Nt.current}}];(0,Bt.Z)(["shift.4"],function(){Oe!=="4"&&window.location.href.indexOf("/apiTest/testcase/")>-1&&window.location.href.endsWith("/".concat(re))&&ve(!0)},{exactMatch:!0,useCapture:!0});var Qt=function(){var y=m()(s()().mark(function v(){var U;return s()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,(0,b.Z7)({page:1,size:500});case 2:U=N.sent,p.Z.response(U)&&st(U.data.map(function(rt){return{name:"${"+rt.key+"}"}}));case 4:case"end":return N.stop()}},v)}));return function(){return y.apply(this,arguments)}}();(0,I.useEffect)(function(){Qt()},[]),(0,I.useEffect)(function(){Yt(w)},[w]);var Mt=function(){i({type:"testcase/save",payload:{constructorModal:!0,testCaseConstructorData:{public:!0,enable:!0},currentStep:0,constructRecord:{}}}),i({type:"construct/save",payload:{currentStep:0}})},Xt=function(){var y=m()(s()().mark(function v(U){var Ce,N,rt,Me=arguments;return s()().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:return Ce=Me.length>1&&Me[1]!==void 0?Me[1]:!1,Pt.next=3,i({type:"construct/delete",payload:{id:U.id}});case 3:N=Pt.sent,N&&(Ce?rt=me.filter(function(ht){return ht.id!==U.id}):rt=w.filter(function(ht){return ht.id!==U.id}),i({type:"testcase/save",payload:V()({},Ce?"postConstructor":"preConstructor",rt)}));case 5:case"end":return Pt.stop()}},v)}));return function(U){return y.apply(this,arguments)}}(),_t=function(){var y=m()(s()().mark(function v(U,Ce){var N;return s()().wrap(function(Me){for(;;)switch(Me.prev=Me.next){case 0:N=g()(Ce?me:w),N.splice(U.index,1),i({type:"testcase/save",payload:V()({},Ce?"postConstructor":"preConstructor",N.map(function(mt,Pt){return u()(u()({},mt),{},{index:Pt})}))});case 3:case"end":return Me.stop()}},v)}));return function(U,Ce){return y.apply(this,arguments)}}(),qt=function(v,U){return v.type===4?{body:U.body,headers:$.Z.parseHeaders(U.headers),base_path:U.base_path,url:U.url,request_method:U.request_method,body_type:U.body_type}:U},$t=function(v){var U=JSON.parse(v.constructor_json);i({type:"construct/save",payload:{currentStep:1,testCaseConstructorData:u()(u()({},v),qt(v,U)),constructorType:v.type}}),i({type:"testcase/save",payload:{constructorModal:!0,constructRecord:v}})},en=function(){var y=m()(s()().mark(function v(U,Ce){var N,rt,Me,mt=arguments;return s()().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(N=mt.length>2&&mt[2]!==void 0?mt[2]:!1,Me=g()(N?me:w),!k){ht.next=6;break}rt=!0,ht.next=9;break;case 6:return ht.next=8,i({type:"construct/update",payload:u()(u()({},U),{},{enable:Ce})});case 8:rt=ht.sent;case 9:rt&&(k?Me.forEach(function(Rt,tn){tn===U.index&&(Rt.enable=Ce)}):Me.forEach(function(Rt){Rt.id===U.id&&(Rt.enable=Ce)}),i({type:"testcase/save",payload:V()({},N?"postConstructor":"preConstructor",Me)}));case 10:case"end":return ht.stop()}},v)}));return function(U,Ce){return y.apply(this,arguments)}}(),zt=function(v){var U=JSON.parse(v.constructor_json);if(v.type===0){var Ce=at[U.case_id];return Ce?(0,n.jsxs)("div",{children:["\u7528\u4F8B:"," ",(0,n.jsx)("a",{href:"/#/apiTest/testcase/".concat(Ce.directory_id,"/").concat(Ce.id),rel:"noreferrer",children:Ce.name})]}):null}if(v.type===1)return(0,n.jsx)("code",{children:U.sql});if(v.type===2)return(0,n.jsx)("code",{children:(0,n.jsx)("pre",{children:U.command})});if(v.type===3)return(0,n.jsx)("code",{children:(0,n.jsx)("pre",{children:U.command})})},Wt=function(v){var U=v.number,Ce=v.bgColor,N=v.color,rt=v.style;return U===0?null:(0,n.jsx)("div",{style:u()({display:"inline-block",marginLeft:2,textAlign:"center",width:24,borderRadius:10,background:Ce,color:N},rt),children:U})},kt=[{title:"\u540D\u79F0",key:"name",dataIndex:"name",render:function(v,U,Ce){return(0,n.jsx)("a",{onClick:function(){$t(u()(u()({},U),{},{tempIndex:Ce}))},children:v})},className:"drag-visible"},{title:"\u7C7B\u578B",key:"type",dataIndex:"type",render:function(v){return(0,n.jsx)(Z.Z,{color:E.Z.CASE_CONSTRUCTOR_COLOR[v],children:E.Z.CASE_CONSTRUCTOR[v]})},className:"drag-visible"},{title:"\u72B6\u6001",key:"enable",dataIndex:"enable",className:"drag-visible",render:function(v,U){return(0,n.jsx)(h.Z,{defaultChecked:U.enable,onChange:function(){var Ce=m()(s()().mark(function N(rt){return s()().wrap(function(mt){for(;;)switch(mt.prev=mt.next){case 0:return mt.next=2,en(U,rt);case 2:case"end":return mt.stop()}},N)}));return function(N){return Ce.apply(this,arguments)}}()})}},{title:"\u8FD4\u56DE\u503C",key:"value",dataIndex:"value",className:"drag-visible"},{title:"\u64CD\u4F5C",key:"ops",className:"drag-visible",render:function(v,U,Ce){return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("a",{onClick:function(){$t(u()(u()({},U),{},{tempIndex:Ce}))},children:(0,n.jsx)(pt.Z,{})}),(0,n.jsx)("a",{style:{marginLeft:8},onClick:function(){Ne.Z.confirm({title:"\u4F60\u786E\u5B9A\u8981\u5220\u9664\u8FD9\u4E2A\u6570\u636E\u6784\u9020\u5668\u5417?",icon:(0,n.jsx)(Ze.Z,{}),content:"\u5982\u679C\u53EA\u662F\u6682\u65F6\u4E0D\u5F00\u542F\uFF0C\u53EF\u4EE5\u5148\u6682\u505C\u5B83~",okText:"\u786E\u5B9A",okType:"danger",cancelText:"\u70B9\u9519\u4E86",onOk:function(){var rt=m()(s()().mark(function mt(){return s()().wrap(function(ht){for(;;)switch(ht.prev=ht.next){case 0:if(!k){ht.next=5;break}return ht.next=3,_t(U);case 3:ht.next=7;break;case 5:return ht.next=7,Xt(U);case 7:case"end":return ht.stop()}},mt)}));function Me(){return rt.apply(this,arguments)}return Me}()})},children:(0,n.jsx)(Ae.Z,{twoToneColor:"red"})})]})}}];return(0,n.jsxs)(t.Z,{gutter:8,style:{marginTop:36,minHeight:500},children:[(0,n.jsx)(K,{open:ft,gconfig:Ft,variables:o,onCancel:function(){return ve(!1)}}),(0,n.jsx)(R.Z,{open:ke,onClose:function(){localStorage.setItem("case_study","done"),jt(!1)},steps:wt}),(0,n.jsx)(ye.Z,{span:24,children:(0,n.jsxs)(it.Z,{activeKey:Oe,onChange:function(v){i({type:"testcase/save",payload:{activeKey:v}}),G(v==="6"),v==="1"&&ze.length>0&&i({type:"testcase/save",payload:{envActiveKey:ze[0].id.toString()}})},tabBarExtraContent:(0,n.jsx)(ee.Z,{menu:{items:Gt},children:(0,n.jsx)("a",{onClick:function(v){v.preventDefault()},children:(0,n.jsxs)(Te.Z,{children:[Lt||"\u9009\u62E9\u5F53\u524D\u6267\u884C\u73AF\u5883",(0,n.jsx)(le.Z,{})]})})}),children:[(0,n.jsx)(ie,{tab:(0,n.jsxs)("span",{ref:It,children:[(0,n.jsx)(A.B,{type:"icon-shujuqudong1"}),"\u6570\u636E\u7BA1\u7406"," ",(0,n.jsx)(x.Z,{onClick:function(){window.open("".concat(E.Z.DOCUMENT_URL,"/%E4%BD%BF%E7%94%A8%E6%96%87%E6%A1%A3/%E6%A6%82%E5%BF%B5/%E6%95%B0%E6%8D%AE%E7%AE%A1%E7%90%86"))},icon:(0,n.jsx)(vt.Z,{}),title:"\u5728\u8FD9\u91CC\u4F60\u53EF\u4EE5\u5BF9\u591A\u5957\u73AF\u5883\u7684\u6D4B\u8BD5\u6570\u636E\u8FDB\u884C\u7BA1\u7406\uFF0C\u4ECE\u800C\u8FBE\u5230\u6570\u636E\u9A71\u52A8\u7684\u76EE\u7684~\u70B9\u51FB\u6B64\u6309\u94AE\u67E5\u770B\u8BE6\u7EC6\u6587\u6863\u3002"})]}),children:ze.length>0?(0,n.jsx)(it.Z,{tabPosition:"left",activeKey:Se,onChange:function(v){i({type:"testcase/save",payload:{envActiveKey:v}})},children:ze.map(function(y){return(0,n.jsx)(ie,{tab:y.name,children:(0,n.jsx)(Ve,{caseId:re,currentEnv:Se,createMode:k})},y.id)})}):(0,n.jsx)(Re.Z,{height:280,desc:(0,n.jsxs)("span",{children:["\u6CA1\u6709\u4EFB\u4F55\u73AF\u5883\u4FE1\u606F, ",(0,n.jsx)("a",{href:"/#/config/environment",children:"\u53BB\u6DFB\u52A0"})]})})},"1"),(0,n.jsx)(ie,{tab:(0,n.jsxs)("div",{ref:Kt,children:[(0,n.jsx)(A.B,{type:"icon-DependencyGraph_16x"}),"\u524D\u7F6E\u6B65\u9AA4",(0,n.jsx)(Wt,{number:w.length,bgColor:"rgb(237, 242, 251)",color:"rgb(29, 98, 203)"})]}),children:w.length===0?(0,n.jsx)(l.Z,{height:180,desc:(0,n.jsxs)("div",{children:["\u8FD8\u6CA1\u6709\u524D\u7F6E\u6B65\u9AA4, \u8FD8\u4E0D\u8D76\u5FEB ",(0,n.jsx)("a",{onClick:Mt,children:"\u6DFB\u52A0\u4E00\u4E2A"}),"?"]})}):(0,n.jsxs)(t.Z,{gutter:12,children:[(0,n.jsxs)(ye.Z,{span:16,children:[(0,n.jsx)(t.Z,{children:(0,n.jsx)(ye.Z,{span:24,children:(0,n.jsxs)(be.ZP,{type:"dashed",block:!0,style:{marginBottom:16},onClick:Mt,children:[(0,n.jsx)(de.Z,{}),"\u6DFB\u52A0"]})})}),(0,n.jsx)(ut.Z,{columns:kt,dataSource:w,setDataSource:function(v){i({type:"testcase/save",payload:{preConstructor:v}})},loading:Ke.effects["construct/delete"]||Ke.effects["construct/update"],dragCallback:function(){var y=m()(s()().mark(function v(U){return s()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(!k){N.next=2;break}return N.abrupt("return",!0);case 2:return N.next=4,i({type:"construct/orderConstructor",payload:U.map(function(rt,Me){return{id:rt.id,index:Me}})});case 4:return N.abrupt("return",N.sent);case 5:case"end":return N.stop()}},v)}));return function(v){return y.apply(this,arguments)}}()})]}),(0,n.jsx)(ye.Z,{span:8,children:(0,n.jsx)(H.Z,{style:{height:400,overflow:"auto"},hoverable:!0,bordered:!1,children:w.filter(function(y){return y.enable}).length===0?(0,n.jsx)(Re.Z,{desc:"\u6682\u65E0\u5F00\u542F\u7684\u524D\u7F6E\u6B65\u9AA4"}):(0,n.jsx)(Ue.Z,{children:w.map(function(y,v){return y.enable?(0,n.jsxs)(Ue.Z.Item,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(We.Z,{count:v+1,style:{backgroundColor:"#a6d3ff"}},v)," ","\u540D\u79F0:"," ",y.type===0?(0,n.jsx)("a",{children:y.name},y.name):y.name]},v),zt(y)]},v):null})})})})]})},"2"),(0,n.jsx)(ie,{tab:(0,n.jsxs)("span",{ref:Vt,children:[(0,n.jsx)(A.B,{type:"icon-qingqiu"}),"\u63A5\u53E3\u8BF7\u6C42"]}),children:(0,n.jsx)(t.Z,{gutter:[8,8],children:(0,n.jsx)(ye.Z,{span:24,children:(0,n.jsx)(M,{form:pe,body:z,setBody:we,headers:fe,formData:ue,setFormData:X,caseInfo:dt,setHeaders:nt,bodyType:lt,setBodyType:gt,bordered:!1,save:$e})})})},"3"),(0,n.jsx)(ie,{tab:(0,n.jsxs)("span",{ref:Jt,children:[(0,n.jsx)(A.B,{type:"icon-canshu2"}),"\u51FA\u53C2\u63D0\u53D6"," ",(0,n.jsx)(x.Z,{icon:(0,n.jsx)(vt.Z,{}),title:"\u901A\u8FC7\u7BA1\u7406\u8BF7\u6C42\u4EA7\u751F\u7684\u53C2\u6570\uFF0C\u5E2E\u52A9\u6211\u4EEC\u66F4\u597D\u5730\u6539\u5584\u3010\u65AD\u8A00\u3011"})]}),children:(0,n.jsx)(At,{caseId:re,createMode:k,dispatch:i,testcase:j})},"4"),(0,n.jsx)(ie,{tab:(0,n.jsxs)("div",{ref:Ht,children:[(0,n.jsx)(A.B,{type:"icon-duanyan"}),"\u65AD\u8A00"," ",(0,n.jsx)(Wt,{number:Ie.length,bgColor:"rgb(233, 249, 245)",color:"rgb(40, 195, 151)"})]}),children:(0,n.jsx)(r,{asserts:Ie,caseId:re,createMode:k})},"5"),(0,n.jsx)(ie,{tab:(0,n.jsxs)("div",{ref:Nt,children:[(0,n.jsx)(A.B,{type:"icon-qingliwuliuliang"}),"\u540E\u7F6E\u6B65\u9AA4",(0,n.jsx)(Wt,{number:me.length,bgColor:"rgb(255, 238, 239)",color:"rgb(255, 87, 95)"})]}),children:me.length===0?(0,n.jsx)(l.Z,{height:180,desc:(0,n.jsxs)("div",{children:["\u8FD8\u6CA1\u6709\u540E\u7F6E\u6B65\u9AA4, \u8FD8\u4E0D\u8D76\u7D27 ",(0,n.jsx)("a",{onClick:Mt,children:"\u6DFB\u52A0\u4E00\u4E2A"}),"?"]})}):(0,n.jsxs)(t.Z,{gutter:12,children:[(0,n.jsxs)(ye.Z,{span:16,children:[(0,n.jsx)(t.Z,{children:(0,n.jsx)(ye.Z,{span:24,children:(0,n.jsxs)(be.ZP,{type:"dashed",block:!0,style:{marginBottom:16},onClick:Mt,children:[(0,n.jsx)(de.Z,{}),"\u6DFB\u52A0"]})})}),(0,n.jsx)(ut.Z,{columns:kt,dataSource:me,setDataSource:function(v){i({type:"testcase/save",payload:{postConstructor:v}})},loading:Ke.effects["construct/delete"]||Ke.effects["construct/update"],dragCallback:function(){var y=m()(s()().mark(function v(U){return s()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:if(!k){N.next=2;break}return N.abrupt("return",!0);case 2:return N.next=4,i({type:"construct/orderConstructor",payload:U.map(function(rt,Me){return{id:rt.id,index:Me}})});case 4:return N.abrupt("return",N.sent);case 5:case"end":return N.stop()}},v)}));return function(v){return y.apply(this,arguments)}}()})]}),(0,n.jsx)(ye.Z,{span:8,children:(0,n.jsx)(H.Z,{style:{height:400,overflow:"auto"},hoverable:!0,bordered:!1,children:me.filter(function(y){return y.enable}).length===0?(0,n.jsx)(l.Z,{desc:"\u6682\u65E0\u5F00\u542F\u7684\u540E\u7F6E\u6B65\u9AA4"}):(0,n.jsx)(Ue.Z,{children:me.map(function(y,v){return y.enable?(0,n.jsxs)(Ue.Z.Item,{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(We.Z,{count:v+1,style:{backgroundColor:"#a6d3ff"}},v)," ","\u540D\u79F0:"," ",y.type===0?(0,n.jsx)("a",{children:y.name},y.name):y.name]},v),zt(y)]},v):null})})})})]})},"6")]})})]})},tt=(0,te.connect)(function(O){var d=O.testcase,i=O.gconfig,j=O.loading;return{testcase:d,gconfig:i,loading:j}})(Be)},88496:function(Zt,Fe,e){e.d(Fe,{Z:function(){return n}});var xe=e(15009),u=e.n(xe),se=e(99289),g=e.n(se),P=e(90596),V=e(52445),je=e(4393),s=e(71577),W=e(71230),m=e(15746),L={caseTitle:"caseTitle___B4Pl6"},C=e(76081),A=e(20659),x=e(67294),l=e(60219),Re=e(74842),I=e(44046),H=e(85893),te=V.Z.Item,a=function(M){var ut=M.dispatch,F=M.form,Ne=M.testcase,t=M.caseId,ye=M.body,be=M.setBody,B=M.headers,Ze=M.setHeaders,de=M.formData,Le=M.setFormData,ge=M.bodyType,p=M.setBodyType,E=M.setSuffix,ne=M.onSubmit,r=M.create,q=r===void 0?!1:r,he=Ne.caseInfo;return(0,x.useEffect)(function(){F.resetFields(),F.setFieldsValue(he),be(he.body)},[he]),(0,H.jsx)(V.Z,{form:F,name:"addCase",initialValues:he,children:(0,H.jsxs)(je.Z,{title:(0,H.jsx)("span",{className:L.caseTitle,children:"\u573A\u666F\u4FE1\u606F"}),extra:q?null:(0,H.jsxs)(H.Fragment,{children:[(0,H.jsxs)(s.ZP,{type:"primary",onClick:g()(u()().mark(function ae(){return u()().wrap(function(Qe){for(;;)switch(Qe.prev=Qe.next){case 0:return Qe.next=2,ne(q);case 2:case"end":return Qe.stop()}},ae)})),children:[(0,H.jsx)(l.Z,{})," \u63D0\u4EA4"]}),q?(0,H.jsxs)(s.ZP,{style:{marginLeft:8},children:[(0,H.jsx)(Re.Z,{})," \u6D4B\u8BD5"]}):(0,H.jsxs)(s.ZP,{style:{marginLeft:8},onClick:function(){ut({type:"testcase/save",payload:{editing:!1}})},children:[(0,H.jsx)(l.Z,{})," \u53D6\u6D88"]})]}),children:[(0,H.jsx)(W.Z,{gutter:[8,8],children:A.Z.CaseDetail.map(function(ae){return(0,H.jsx)(m.Z,{span:ae.span||24,children:(0,H.jsx)(te,{label:ae.label,colon:ae.colon||!0,labelCol:{span:8},wrapperCol:{span:16},rules:[{required:ae.required,message:ae.message}],name:ae.name,valuePropName:ae.valuePropName||"value",children:(0,C.Z)(ae.type,ae.placeholder,ae.component)})})})}),(0,H.jsx)(W.Z,{style:{marginTop:8},children:(0,H.jsx)(m.Z,{span:24,children:(0,H.jsx)(I.Z,{case_id:t,body:ye,bodyType:ge,setBody:be,headers:B,setHeaders:Ze,form:F,createMode:q,formData:de,setFormData:Le,setSuffix:E,setBodyType:p})})})]})})},n=(0,P.connect)(function(J){var M=J.user,ut=J.testcase,F=J.loading;return{testcase:ut,user:M,loading:F}})(a)},87023:function(Zt,Fe,e){e.d(Fe,{Z:function(){return Le}});var xe=e(15009),u=e.n(xe),se=e(99289),g=e.n(se),P=e(5574),V=e.n(P),je=e(48055),s=e(53575),W=e(85265),m=e(71230),L=e(66828),C=e(64997),A=e(67294),x=e(42481),l=e(26671),Re=e(9783),I=e.n(Re),H=e(70366),te=e.n(H),a=e(85893),n=60,J={nameFontSize:12,childCountWidth:22,countMarginLeft:0,itemPadding:16,nameMarginLeft:4,rootPadding:18},M=function(ge){var p=ge.data,E=ge.graph,ne=ge.setGraph,r=ge.container_id,q=r===void 0?"container":r;return(0,A.useEffect)(function(){if(p!==null){te().registerNode("treeNode",{draw:function(T,Y){var He=T.id,Ge=T.label,Ae=T.collapsed,_e=T.selected,qe=T.children,Ye=T.depth,Je=Ye===0,yt=qe&&qe.length!==0,ot=J.childCountWidth,vt=J.countMarginLeft,Et=J.itemPadding,bt=J.selectedIconWidth,At=J.nameMarginLeft,it=J.rootPadding,et=0,xt=28,S=0,K=-xt/2,b=Y.addShape("text",{attrs:{text:Ge,x:S*2,y:K,textAlign:"left",textBaseline:"top",fontFamily:"PingFangSC-Regular"},cursor:"pointer",name:"name-text-shape"}),Q=b.getBBox().width;et=Q+Et+At,et=et<n?n:et,!Je&&yt&&(et+=vt,et+=ot);var $={x:S,y:K,width:et,height:xt,radius:4};Je&&_e&&($.fill="#e8f7ff",$.stroke="#e8f7ff");var pt=Y.addShape("rect",{attrs:$,name:"root-key-shape-rect-shape"});Je||Y.addShape("path",{attrs:{path:[["M",S-1,0],["L",et,0]],stroke:"#AAB7C4",lineWidth:1},name:"node-path-shape"});var le=S-10,Bt=-xt+15;Je&&Y.addShape("rect",{attrs:{x:le,y:Bt,width:et+12,height:xt,radius:14,fill:"#e8f7ff",cursor:"pointer"},name:"main-shape"});var ct="rgba(0, 0, 0, .65)";if(_e&&(ct="#40A8FF"),Je?Y.addShape("text",{attrs:{text:Ge,x:le+it,y:1,textAlign:"left",textBaseline:"middle",fill:ct,fontSize:12,fontFamily:"PingFangSC-Regular",cursor:"pointer"},name:"root-text-shape"}):Y.addShape("text",{attrs:{text:Ge,x:_e?le+6+At:le+6,y:K-5,textAlign:"start",textBaseline:"top",fill:ct,fontSize:12,fontFamily:"PingFangSC-Regular",cursor:"pointer"},name:"not-root-text-shape"}),yt&&!Je){var Ee=12,Z=et-ot,h=-Ee/2;Y.addShape("rect",{attrs:{width:ot,height:12,stroke:Ae?"#1890ff":"#5CDBD3",fill:Ae?"#fff":"#E6FFFB",x:Z,y:h,radius:6,cursor:"pointer"},name:"child-count-rect-shape"}),Y.addShape("text",{attrs:{text:"".concat(qe==null?void 0:qe.length),fill:"rgba(0, 0, 0, .65)",x:Z+ot/2,y:h+12,fontSize:10,width:ot,textAlign:"center",cursor:"pointer"},name:"child-count-text-shape"})}return pt}}),te().registerEdge("smooth",{draw:function(T,Y){var He=T.startPoint,Ge=T.endPoint,Ae=Math.abs(Ge.x-He.x),_e=[["M",He.x,He.y],["C",He.x+Ae/4,He.y,Ge.x-Ae/2,Ge.y,Ge.x,Ge.y]],qe=Y.addShape("path",{attrs:{stroke:"#AAB7C4",path:_e},name:"smooth-path-shape"});return qe}});var he=document.getElementById(q),ae=he.scrollWidth,Ve=he.scrollHeight||400;if(E==null){var Qe=new(te()).TreeGraph({container:q,width:ae,height:Ve,modes:{default:[{type:"collapse-expand"},"drag-canvas","zoom-canvas"]},defaultNode:{type:"treeNode",anchorPoints:[[0,.5],[1,.5]]},defaultEdge:{type:"smooth"},layout:{type:"compactBox",direction:"LR",getId:function(T){return T.id},getHeight:function(){return 16},getWidth:function(T){var Y=te().Util.getTextSize(T.label,J.nameFontSize)[0],He=J.itemPadding+J.nameMarginLeft+Y+J.rootPadding+J.childCountWidth;return He},getVGap:function(){return 15},getHGap:function(){return 30}}});ne(I()({},q,Qe)),Qe.data(p),Qe.render(),Qe.fitView()}else E.changeData(p),E.render(),E.fitView();typeof window!="undefined"&&(window.onresize=function(){!E||E.get("destroyed")||!he||!he.scrollWidth||!he.scrollHeight||E.changeSize(he.scrollWidth,he.scrollHeight)})}},[p]),(0,a.jsx)("div",{})},ut=e(4713),F=e(10981),Ne=e(22763),t=e(37594),ye=e(26194),be=e(24315),B=je.Z.TabPane,Ze={200:{color:"#67C23A",text:"OK"},401:{color:"#F56C6C",text:"unauthorized"},400:{color:"#F56C6C",text:"Bad Request"}},de=[{title:"KEY",dataIndex:"key",key:"key"},{title:"VALUE",dataIndex:"value",key:"value"}],Le=function(ge){var p=ge.response,E=ge.caseName,ne=ge.width,r=ge.modal,q=ge.setModal,he=ge.single,ae=he===void 0?!0:he,Ve=(0,A.useState)(null),Qe=V()(Ve,2),Xe=Qe[0],T=Qe[1],Y=(0,A.useState)([]),He=V()(Y,2),Ge=He[0],Ae=He[1],_e=(0,A.useState)({}),qe=V()(_e,2),Ye=qe[0],Je=qe[1],yt=(0,A.useState)(null),ot=V()(yt,2),vt=ot[0],Et=ot[1],bt=function(){var S=g()(u()().mark(function K(){var b,Q,$,pt,le=arguments;return u()().wrap(function(ct){for(;;)switch(ct.prev=ct.next){case 0:return b=le.length>0&&le[0]!==void 0?le[0]:p.case_id,Q=le.length>1&&le[1]!==void 0?le[1]:!0,ct.next=4,(0,ut.T4)({case_id:b});case 4:$=ct.sent,F.Z.response($)&&(Q?T($.data):(pt=Object.keys(p).map(function(Ee){return $.data}),Ae(pt)));case 6:case"end":return ct.stop()}},K)}));return function(){return S.apply(this,arguments)}}(),At=function(){var S=g()(u()().mark(function K(){var b,Q,$;return u()().wrap(function(le){for(;;)switch(le.prev=le.next){case 0:if(!ae){le.next=6;break}if(p.case_id===void 0){le.next=4;break}return le.next=4,bt();case 4:le.next=16;break;case 6:b=0,Q=Object.keys(p);case 7:if(!(b<Q.length)){le.next=16;break}if($=Q[b],p[$].case_id===void 0){le.next=12;break}return le.next=12,bt(p[$].case_id,!1);case 12:return le.abrupt("return");case 13:b++,le.next=7;break;case 16:case"end":return le.stop()}},K)}));return function(){return S.apply(this,arguments)}}();(0,A.useEffect)(function(){At()},[p]);var it=function(K){var b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:p;if(b[K]===null||b[K]===void 0||b[K]==="{}")return[];var Q=JSON.parse(b[K]);return Object.keys(Q).map(function($){return{key:$,value:Q[$]}})},et=[{title:"\u65AD\u8A00\u4FE1\u606F",key:"msg",dataIndex:"msg"},{title:"\u72B6\u6001",key:"status",dataIndex:"status",render:function(K){return(0,a.jsx)(s.Z,{status:K?"success":"error",text:K?"\u901A\u8FC7":"\u672A\u901A\u8FC7"})}}],xt=function(){var K=arguments.length>0&&arguments[0]!==void 0?arguments[0]:p;if(K.asserts===void 0||!K.asserts)return[];var b=JSON.parse(K.asserts),Q=[];return Object.keys(b).forEach(function($){typeof b[$].msg=="string"?Q.push({status:b[$].status,msg:b[$].msg}):b[$].msg.forEach(function(pt){Q.push({status:b[$].status,msg:pt})})}),Q};return(0,a.jsx)(W.Z,{title:(0,a.jsxs)("span",{children:["[",(0,a.jsx)("strong",{children:E}),"] \u6267\u884C\u8BE6\u60C5"]}),width:ne||1e3,open:r,placement:"right",onClose:function(){return q(!1)},children:(0,a.jsx)(m.Z,{gutter:[8,8],children:ae?(0,a.jsxs)(je.Z,{style:{width:"100%",minHeight:460},tabPosition:"left",children:[(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-yongliliebiao"}),"\u57FA\u672C\u4FE1\u606F"]}),children:(0,a.jsxs)(L.Z,{column:2,bordered:!0,size:"middle",children:[(0,a.jsx)(L.Z.Item,{label:"\u6D4B\u8BD5\u7ED3\u679C",children:(0,a.jsx)(s.Z,{status:p.status?"success":"error",text:p.status?"\u6210\u529F":"\u5931\u8D25"})}),(0,a.jsx)(L.Z.Item,{label:"\u8BF7\u6C42\u65B9\u5F0F",children:p.request_method}),(0,a.jsx)(L.Z.Item,{label:"HTTP\u72B6\u6001\u7801",children:(0,a.jsxs)("span",{style:{color:Ze[p.status_code]?Ze[p.status_code].color:"#F56C6C",marginLeft:8,marginRight:8},children:[p.status_code," ",Ze[p.status_code]?Ze[p.status_code].text:""]})}),(0,a.jsx)(L.Z.Item,{label:"\u6267\u884C\u65F6\u95F4",children:(0,a.jsx)("span",{style:{marginLeft:8,marginRight:8},children:(0,a.jsx)("span",{style:{color:"#67C23A"},children:p.cost})})}),(0,a.jsx)(L.Z.Item,{label:"\u8BF7\u6C42url",span:2,children:p.url}),(0,a.jsx)(L.Z.Item,{label:"\u8BF7\u6C42body",span:2,children:p.request_data?(0,a.jsx)(x.Z,{language:"json",style:l.BV,children:p.request_data}):(0,a.jsx)(Ne.Z,{height:120})})]})},"1"),(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-duanyan"}),"\u65AD\u8A00"]}),children:(0,a.jsx)(C.Z,{columns:et,dataSource:xt(),size:"small",pagination:!1})},"3"),(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-rizhi"}),"\u6267\u884C\u65E5\u5FD7"]}),children:(0,a.jsx)(be.Z,{language:"html",setEditor:Et,readOnly:!0,value:p.logs,height:"80vh"})},"2"),(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Request Headers"]}),children:(0,a.jsx)(C.Z,{columns:de,dataSource:it("request_headers"),size:"small",pagination:!1})},"5"),(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-cookies-1"}),"Cookie"]}),children:(0,a.jsx)(C.Z,{columns:de,dataSource:it("cookies"),size:"small",pagination:!1})},"6"),(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Response Headers"]}),children:(0,a.jsx)(C.Z,{columns:de,dataSource:it("response_headers"),size:"small",pagination:!1})},"7"),(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-xiangying"}),"Response"]}),children:(0,a.jsx)(ye.Z,{readOnly:!0,setEditor:Et,value:p.response?p.response:"",height:"80vh"})},"4"),(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-tounaofengbao"}),"\u8111\u56FE"]}),children:(0,a.jsx)("div",{id:"container",children:(0,a.jsx)(M,{data:Xe,graph:Ye.container,setGraph:Je})})},"8")]}):(0,a.jsx)(je.Z,{style:{width:"100%",minHeight:460},children:Object.keys(p).map(function(S,K){var b;return(0,a.jsx)(B,{tab:S,children:(0,a.jsxs)(je.Z,{style:{width:"100%"},tabPosition:"left",children:[(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-yongliliebiao"}),"\u57FA\u672C\u4FE1\u606F"]}),children:(0,a.jsxs)(L.Z,{column:2,bordered:!0,size:"middle",children:[(0,a.jsx)(L.Z.Item,{label:"\u6D4B\u8BD5\u7ED3\u679C",children:(0,a.jsx)(s.Z,{status:p[S].status?"success":"error",text:p[S].status?"\u6210\u529F":"\u5931\u8D25"})}),(0,a.jsx)(L.Z.Item,{label:"\u8BF7\u6C42\u65B9\u5F0F",children:p[S].request_method}),(0,a.jsx)(L.Z.Item,{label:"HTTP\u72B6\u6001\u7801",children:(0,a.jsxs)("span",{style:{color:Ze[p[S].status_code]?Ze[p[S].status_code].color:"#F56C6C",marginLeft:8,marginRight:8},children:[p[S].status_code," ",Ze[p[S].status_code]?Ze[p[S].status_code].text:""]})}),(0,a.jsx)(L.Z.Item,{label:"\u6267\u884C\u65F6\u95F4",children:(0,a.jsx)("span",{style:{marginLeft:8,marginRight:8},children:(0,a.jsx)("span",{style:{color:"#67C23A"},children:p[S].cost})})}),(0,a.jsx)(L.Z.Item,{label:"\u8BF7\u6C42url",span:2,children:p[S].url}),(0,a.jsx)(L.Z.Item,{label:"\u8BF7\u6C42body",span:2,children:p[S].request_data?(0,a.jsx)(x.Z,{language:"json",style:l.BV,children:p[S].request_data}):(0,a.jsx)(Ne.Z,{height:120})})]})},"1"),(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-duanyan"}),"\u65AD\u8A00"]}),children:(0,a.jsx)(C.Z,{columns:et,dataSource:xt(p[S]),size:"small",pagination:!1})},"3"),(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-rizhi"}),"\u6267\u884C\u65E5\u5FD7"]}),children:(0,a.jsx)(be.Z,{language:"html",setEditor:Et,readOnly:!0,value:(b=p[S])===null||b===void 0?void 0:b.logs,height:"80vh"})},"2"),(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Request Headers"]}),children:(0,a.jsx)(C.Z,{columns:de,dataSource:it("request_headers",p[S]),size:"small",pagination:!1})},"5"),(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-cookies-1"}),"Cookie"]}),children:(0,a.jsx)(C.Z,{columns:de,dataSource:it("cookies",p[S]),size:"small",pagination:!1})},"6"),(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-header"}),"Response Headers"]}),children:(0,a.jsx)(C.Z,{columns:de,dataSource:it("response_headers",p[S]),size:"small",pagination:!1})},"7"),(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-xiangying"}),"Response"]}),children:(0,a.jsx)(ye.Z,{setEditor:Et,readOnly:!0,value:p[S].response?p[S].response:"",height:"80vh"})},"4"),(0,a.jsx)(B,{tab:(0,a.jsxs)("span",{children:[(0,a.jsx)(t.B,{type:"icon-tounaofengbao"}),"\u8111\u56FE"]}),children:(0,a.jsx)("div",{id:"container_".concat(K),children:(0,a.jsx)(M,{data:Ge[K],graph:Ye["container_".concat(K)],setGraph:Je,container_id:"container_".concat(K)})})},"8")]})},K.toString())})})})})}},72729:function(){}}]);
